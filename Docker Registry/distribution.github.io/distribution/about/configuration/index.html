<!DOCTYPE html>
<html
  lang="en"
  class="color-toggle-hidden"
  
>
  <head>
    <meta charset="UTF-8" />
<meta name="referrer" content="no-referrer" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="color-scheme" content="light dark" />
<meta name="generator" content="Hugo 0.119.0">


  <meta name="description" content="Explains how to configure a registry" />
  <meta name="keywords" content="registry,,on-prem,,images,,tags,,repository,,distribution,,configuration" />

    <title>Configuring a registry | CNCF Distribution</title>

    <link rel="icon" type="image/svg+xml" href="../../favicon/favicon.svg" />
<link
  rel="icon"
  type="image/png"
  sizes="32x32"
  href="../../favicon/favicon-32x32.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="16x16"
  href="../../favicon/favicon-16x16.png"
/>

    

    
  <meta
    property="og:title"
    content="Configuring a registry"
  />
  <meta property="og:site_name" content="CNCF Distribution" />
  <meta property="og:description" content="Explains how to configure a registry" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://distribution.github.io/distribution/about/configuration/" />

<meta property="article:section" content="About" />


  <meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Configuring a registry" />
  <meta name="twitter:description" content="Explains how to configure a registry" />


  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "TechArticle",
      "articleSection": "About",
      "name": "Configuring a registry",
      "url" : "https://distribution.github.io/distribution/about/configuration/",
      "headline": "Configuring a registry",
      "description": "Explains how to configure a registry",
      "wordCount" : "5998",
      "license": "CC BY 4.0",
      "inLanguage": "en",
      "isFamilyFriendly": "true",
      "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://distribution.github.io/distribution/about/configuration/"
      },
      "copyrightHolder" : "CNCF Distribution",
      "copyrightYear" : "0001",
      "dateCreated": "0001-01-01T00:00:00.00Z",
      "datePublished": "0001-01-01T00:00:00.00Z",
      "dateModified": "0001-01-01T00:00:00.00Z",
      "publisher":{
          "@type":"Organization",
          "name": "CNCF Distribution",
          "url": "https://distribution.github.io/distribution",
          "logo": {
              "@type": "ImageObject",
              "url": "https://distribution.github.io/distribution/brand.svg",
              "width":"32",
              "height":"32"
          }
      }
  }
  </script>


    
  <script src="../../js/colortheme-d3e4d351.bundle.min.js"></script>
<script src="../../js/main-924a1933.bundle.min.js"></script>

<link
  rel="preload"
  as="font"
  href="../../fonts/Metropolis.woff2"
  type="font/woff2"
  crossorigin="anonymous"
/>
<link
  rel="preload"
  as="font"
  href="../../fonts/LiberationSans.woff2"
  type="font/woff2"
  crossorigin="anonymous"
/>

<link
  rel="preload"
  href="../../main-252d384c.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="../../main-252d384c.min.css"
  media="all"
/>

<link
  rel="preload"
  href="../../mobile-79ddc617.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="../../mobile-79ddc617.min.css"
  media="screen and (max-width: 45rem)"
/>

<link
  rel="preload"
  href="../../print-735ccc12.min.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="../../print-735ccc12.min.css"
  media="print"
/>

<link
  rel="preload"
  href="../../custom.css"
  as="style"
/>
<link
  rel="stylesheet"
  href="../../custom.css"
  media="all"
/>
  <link href="index.html" rel="canonical" type="text/html" />

<!-- Made with Geekdoc theme https://github.com/thegeeklab/hugo-geekdoc -->

    

  </head>

  <body itemscope itemtype="https://schema.org/WebPage">
    
  <!-- geekdoc include: sprites/geekdoc.svg -->
  <svg class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M24 10.526v2.947H5.755l8.351 8.421-2.105 2.105-12-12 12-12 2.105 2.105-8.351 8.421H24z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M5.965 10.526V6.035L0 12l5.965 5.965v-4.491H24v-2.947H5.965z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M18.035 10.526V6.035L24 12l-5.965 5.965v-4.491H0v-2.947h18.035z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_bitbucket" xmlns="http://www.w3.org/2000/svg"><path d="M15.905 13.355c.189 1.444-1.564 2.578-2.784 1.839-1.375-.602-1.375-2.784-.034-3.403 1.151-.705 2.818.223 2.818 1.564zm1.907-.361c-.309-2.44-3.076-4.056-5.328-3.042-1.426.636-2.389 2.148-2.32 3.747.086 2.097 2.08 3.815 4.176 3.626s3.729-2.234 3.472-4.331zm4.108-9.315c-.756-.997-2.045-1.169-3.179-1.358-3.214-.516-6.513-.533-9.727.034-1.066.172-2.269.361-2.939 1.323 1.1 1.031 2.664 1.186 4.073 1.358 2.544.327 5.156.344 7.699.017 1.426-.172 3.008-.309 4.073-1.375zm.979 17.788c-.481 1.684-.206 3.953-1.994 4.932-3.076 1.701-6.806 1.89-10.191 1.289-1.787-.327-3.884-.894-4.864-2.578-.43-1.65-.705-3.334-.98-5.018l.103-.275.309-.155c5.121 3.386 12.288 3.386 17.427 0 .808.241.206 1.22.189 1.805zM26.01 4.951c-.584 3.764-1.255 7.51-1.908 11.257-.189 1.1-1.255 1.719-2.148 2.183-3.214 1.615-6.96 1.89-10.483 1.512-2.389-.258-4.829-.894-6.771-2.389-.911-.705-.911-1.908-1.083-2.922-.602-3.523-1.289-7.046-1.719-10.604.206-1.547 1.942-2.217 3.231-2.698C6.848.654 8.686.362 10.508.19c3.884-.378 7.854-.241 11.618.859 1.341.395 2.784.945 3.695 2.097.412.533.275 1.203.189 1.805z"/></svg><svg viewBox="-7.27 -7.27 38.55 38.55" id="gdoc_bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15.268 4.392q.868 0 1.532.638t.664 1.506v17.463l-7.659-3.268-7.608 3.268V6.536q0-.868.664-1.506t1.532-.638h10.876zm4.34 14.144V4.392q0-.868-.638-1.532t-1.506-.664H6.537q0-.868.664-1.532T8.733 0h10.876q.868 0 1.532.664t.664 1.532v17.412z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_auto" xmlns="http://www.w3.org/2000/svg"><path d="M16.846 18.938h2.382L15.22 7.785h-2.44L8.772 18.938h2.382l.871-2.44h3.95zm7.087-9.062L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809zm-11.385 4.937L14 10.282l1.452 4.531h-2.904z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_dark" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565q-1.51 0-3.079.697 1.917.871 3.108 2.701T15.22 14t-1.191 4.037-3.108 2.701q1.568.697 3.079.697zm9.933-11.559L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_brightness_light" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565 8.743 8.743 6.565 14t2.178 5.257T14 21.435zm9.933-3.311v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809L27.999 14z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_check" xmlns="http://www.w3.org/2000/svg"><path d="M8.885 20.197 25.759 3.323l2.24 2.24L8.885 24.677 0 15.792l2.24-2.24z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_check_circle_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm6.441 7.822 1.972 1.972-11.239 11.239L4.207 14l1.972-1.972 4.995 4.995z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_cloud_off" xmlns="http://www.w3.org/2000/svg"><path d="M9.023 10.5H7q-1.914 0-3.281 1.395t-1.367 3.309 1.367 3.281T7 19.852h11.375zM3.5 4.976l1.477-1.477L24.5 23.022l-1.477 1.477-2.352-2.297H6.999q-2.898 0-4.949-2.051t-2.051-4.949q0-2.844 1.969-4.867t4.758-2.133zm19.086 5.578q2.242.164 3.828 1.832T28 16.351q0 3.008-2.461 4.758l-1.695-1.695q1.805-.984 1.805-3.063 0-1.422-1.039-2.461t-2.461-1.039h-1.75v-.602q0-2.68-1.859-4.539t-4.539-1.859q-1.531 0-2.953.711l-1.75-1.695Q11.431 3.5 14.001 3.5q2.953 0 5.496 2.078t3.09 4.977z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75 0 1 0-3.501.001 1.75 1.75 0 0 0 3.501-.001zm0-21a1.75 1.75 0 1 0-3.501.001A1.75 1.75 0 0 0 9.917 3.5zm11.666 2.333a1.75 1.75 0 1 0-3.501.001 1.75 1.75 0 0 0 3.501-.001zm1.75 0a3.502 3.502 0 0 1-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502 0 0 1 1.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502 0 0 1 4.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502 0 0 1-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502 0 0 1-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_copy" xmlns="http://www.w3.org/2000/svg"><path d="M23.502 25.438V7.626H9.562v17.812h13.94zm0-20.315q1.013 0 1.787.745t.774 1.757v17.812q0 1.013-.774 1.787t-1.787.774H9.562q-1.013 0-1.787-.774t-.774-1.787V7.625q0-1.013.774-1.757t1.787-.745h13.94zM19.689 0v2.562H4.438v17.812H1.936V2.562q0-1.013.745-1.787T4.438.001h15.251z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_dangerous" xmlns="http://www.w3.org/2000/svg"><path d="M21.802 19.833 15.969 14l5.833-5.833-1.969-1.969L14 12.031 8.167 6.198 6.198 8.167 12.031 14l-5.833 5.833 1.969 1.969L14 15.969l5.833 5.833zM19.833 0 28 8.167v11.666L19.833 28H8.167L0 19.833V8.167L8.167 0h11.666z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277 0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352 0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46 0v3.155h-3.155v-3.155h3.155zm-6.384 0v3.155h-3.23v-3.155h3.23z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277 0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277 0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_error_outline" xmlns="http://www.w3.org/2000/svg"><path d="M14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 6.967h2.761v8.413H12.62V6.967zm0 11.239h2.761v2.826H12.62v-2.826z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_fire" xmlns="http://www.w3.org/2000/svg"><path d="M17.689 21.998q-.32.32-.8.576t-.864.384q-1.152.384-2.272.032t-1.888-.992q-.128-.128-.096-.256t.16-.192q1.216-.384 1.92-1.216t.96-1.792q.192-.896-.064-1.728t-.384-1.728q-.128-.704-.096-1.376t.288-1.312q0-.128.128-.128t.192.064q.384.832.992 1.472t1.28 1.216 1.216 1.248.672 1.568q.064.384.064.704.064.96-.32 1.92t-1.088 1.536zm3.84-10.944q-.768-.704-1.6-1.28t-1.6-1.344q-1.536-1.536-2.016-3.584t.16-4.16q.128-.32-.096-.544t-.544-.096q-.768.32-1.44.768t-1.312.896q-1.984 1.664-3.136 3.936T8.633 10.51t.8 5.088q0 .128.032.256t.032.256q0 .576-.512.832t-1.024-.192q-.128-.192-.192-.32-1.024-1.28-1.376-2.912t-.096-3.232q.064-.384-.288-.576t-.608.128q-1.28 1.664-1.856 3.68t-.448 4.064q0 .576.096 1.184t.288 1.184q.448 1.536 1.216 2.816 1.216 2.048 3.264 3.424t4.416 1.696q2.496.32 5.024-.256t4.448-2.304q1.408-1.344 2.208-3.104t.864-3.68-.704-3.712q-.064-.128-.096-.224t-.096-.224q-.576-1.088-1.28-1.984-.256-.384-.544-.704t-.672-.64z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_git" xmlns="http://www.w3.org/2000/svg"><path d="M27.472 12.753 15.247.529a1.803 1.803 0 0 0-2.55 0l-2.84 2.84 2.137 2.137a2.625 2.625 0 0 1 3.501 3.501l3.499 3.499a2.625 2.625 0 1 1-1.237 1.237l-3.499-3.499c-.083.04-.169.075-.257.106v7.3a2.626 2.626 0 1 1-1.75 0v-7.3a2.626 2.626 0 0 1-1.494-3.607L8.62 4.606l-8.09 8.09a1.805 1.805 0 0 0 0 2.551l12.225 12.224a1.803 1.803 0 0 0 2.55 0l12.168-12.168a1.805 1.805 0 0 0 0-2.551z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_gitea" xmlns="http://www.w3.org/2000/svg"><path d="M5.581 7.229c-2.46-.005-5.755 1.559-5.573 5.48.284 6.125 6.56 6.693 9.068 6.743.275 1.149 3.227 5.112 5.412 5.32h9.573c5.741-.381 10.04-17.363 6.853-17.427-5.271.248-8.395.373-11.073.395v5.3l-.835-.369-.005-4.928c-3.075-.001-5.781-.144-10.919-.397-.643-.004-1.539-.113-2.501-.116zm.348 2.166h.293c.349 3.14.917 4.976 2.067 7.781-2.933-.347-5.429-1.199-5.888-4.38-.237-1.647.563-3.365 3.528-3.401zm11.409 3.087c.2.003.404.04.596.128l.999.431-.716 1.305h-.007a.996.996 0 0 0-.321.053l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006a.767.767 0 0 0 .151.233l-.001-.001-1.235 2.248a.99.99 0 0 0-.302.052l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006c.128.31.457.527.843.527a.987.987 0 0 0 .31-.049l-.006.002c.348-.114.592-.406.592-.749 0-.097-.02-.19-.056-.277l.002.006a.784.784 0 0 0-.211-.293l1.203-2.189a.999.999 0 0 0 .397-.041l-.006.002a.942.942 0 0 0 .285-.15l-.001.001c.464.195.844.353 1.117.488.411.203.556.337.6.487.044.147-.004.429-.236.925-.173.369-.46.893-.799 1.511h-.02a.991.991 0 0 0-.321.053l.006-.002c-.349.114-.593.406-.593.749 0 .097.019.189.055.275l-.002-.006c.128.31.457.527.843.527a.987.987 0 0 0 .31-.049l-.006.002c.348-.114.592-.406.592-.749a.703.703 0 0 0-.055-.275l.002.006a.802.802 0 0 0-.183-.27l.001.001c.335-.611.623-1.136.808-1.531.251-.536.381-.935.267-1.32s-.467-.636-.933-.867c-.307-.151-.689-.311-1.147-.503a.723.723 0 0 0-.052-.324l.002.006a.792.792 0 0 0-.194-.279l.704-1.284 3.899 1.684c.704.305.995 1.053.653 1.68l-2.68 4.907c-.343.625-1.184.884-1.888.58l-5.516-2.384c-.704-.304-.996-1.053-.653-1.68l2.68-4.905c.235-.431.707-.687 1.207-.707z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833 0 15.999 7.166 15.999 15.999 0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771 0-.521.021-2.25.021-4.396 0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896 0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032 0 0 0-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291 0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896 0 1.333.021 2.583.021 2.979 0 .417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25 0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229 0 .375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354 0 .396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187 0-.333.104-.333.229 0 .146.146.25.354.229.187 0 .333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_gitlab" xmlns="http://www.w3.org/2000/svg"><path d="M1.629 11.034 14 26.888.442 17.048a1.09 1.09 0 0 1-.39-1.203l1.578-4.811zm7.217 0h10.309l-5.154 15.854zM5.753 1.475l3.093 9.559H1.63l3.093-9.559a.548.548 0 0 1 1.031 0zm20.618 9.559 1.578 4.811c.141.437-.016.922-.39 1.203l-13.558 9.84 12.371-15.854zm0 0h-7.216l3.093-9.559a.548.548 0 0 1 1.031 0z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11 0 0 1-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125 0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339 0 8.535 3.125 8.535 8.357 0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_home" xmlns="http://www.w3.org/2000/svg"><path d="M24.003 15.695v8.336c0 .608-.504 1.111-1.111 1.111h-6.669v-6.669h-4.446v6.669H5.108a1.119 1.119 0 0 1-1.111-1.111v-8.336c0-.035.017-.069.017-.104L14 7.359l9.986 8.232a.224.224 0 0 1 .017.104zm3.873-1.198-1.077 1.285a.578.578 0 0 1-.365.191h-.052a.547.547 0 0 1-.365-.122L14 5.831 1.983 15.851a.594.594 0 0 1-.417.122.578.578 0 0 1-.365-.191L.124 14.497a.57.57 0 0 1 .069-.781L12.679 3.314c.729-.608 1.91-.608 2.64 0l4.237 3.543V3.471c0-.313.243-.556.556-.556h3.334c.313 0 .556.243.556.556v7.085l3.803 3.161c.226.191.26.556.069.781z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_info_outline" xmlns="http://www.w3.org/2000/svg"><path d="M12.62 9.793V6.967h2.761v2.826H12.62zM14 25.239q4.601 0 7.92-3.319T25.239 14 21.92 6.08 14 2.761 6.08 6.08 2.761 14t3.319 7.92T14 25.239zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0zm-1.38 21.033V12.62h2.761v8.413H12.62z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_keyboard_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36 14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_keyboard_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25 22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_keyboard_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25 18.375 16 6.125 3.75 9.875 0l15.999 15.999L9.875 31.998z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_keyboard_arrow_up" xmlns="http://www.w3.org/2000/svg"><path d="M24.719 22.64 14 11.921 3.281 22.64 0 19.359l14-14 14 14z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_language" xmlns="http://www.w3.org/2000/svg"><path d="M20.112 16.826h4.732q.394-1.84.394-2.826t-.394-2.826h-4.732q.197 1.38.197 2.826t-.197 2.826zm-2.497 7.756q1.643-.526 3.418-2.005t2.695-2.991h-4.141q-.657 2.629-1.972 4.995zm-.329-7.756q.197-1.38.197-2.826t-.197-2.826h-6.573q-.197 1.38-.197 2.826t.197 2.826h6.573zM14 25.173q1.84-2.695 2.695-5.587h-5.39q.854 2.892 2.695 5.587zM8.413 8.413q.789-2.826 1.972-4.995-1.643.526-3.451 2.005T4.272 8.414h4.141zM4.272 19.587q.854 1.512 2.662 2.991t3.451 2.005q-1.315-2.366-1.972-4.995H4.272zm-1.117-2.761h4.732Q7.69 15.446 7.69 14t.197-2.826H3.155q-.394 1.84-.394 2.826t.394 2.826zM14 2.826q-1.84 2.695-2.695 5.587h5.39Q15.841 5.521 14 2.826zm9.727 5.587q-.92-1.512-2.695-2.991t-3.418-2.005q1.183 2.169 1.972 4.995h4.141zM14 0q5.784 0 9.892 4.108T28 14t-4.108 9.892T14 28t-9.892-4.108T0 14t4.108-9.892T14 0z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305 0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028 0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305 0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028 0-3.493 1.465t-1.465 3.493z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_mastodon" xmlns="http://www.w3.org/2000/svg"><path d="M30.924 10.506c0-6.941-4.548-8.976-4.548-8.976C24.083.477 20.144.034 16.054.001h-.101C11.862.034 7.926.477 5.633 1.53c0 0-4.548 2.035-4.548 8.976 0 1.589-.031 3.491.02 5.505.165 6.79 1.245 13.479 7.522 15.14 2.893.765 5.379.927 7.38.816 3.629-.2 5.667-1.296 5.667-1.296l-.12-2.633s-2.593.817-5.505.719c-2.887-.099-5.932-.311-6.399-3.855a7.069 7.069 0 0 1-.064-.967v-.028.001s2.833.693 6.423.857c2.195.1 4.253-.129 6.344-.377 4.009-.479 7.5-2.949 7.939-5.207.689-3.553.633-8.676.633-8.676zm-5.366 8.945h-3.329v-8.159c0-1.72-.724-2.592-2.171-2.592-1.6 0-2.403 1.035-2.403 3.083v4.465h-3.311v-4.467c0-2.048-.803-3.083-2.403-3.083-1.447 0-2.171.873-2.171 2.592v8.159H6.441v-8.404c0-1.719.437-3.084 1.316-4.093.907-1.011 2.092-1.528 3.565-1.528 1.704 0 2.995.655 3.848 1.965l.828 1.391.829-1.391c.853-1.311 2.144-1.965 3.848-1.965 1.472 0 2.659.517 3.565 1.528.877 1.009 1.315 2.375 1.315 4.093z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_matrix" xmlns="http://www.w3.org/2000/svg"><path d="M.843.734v30.532H3.04v.733H0V0h3.04v.733zm9.391 9.68v1.543h.044a4.417 4.417 0 0 1 1.489-1.365c.577-.327 1.248-.487 2-.487.72 0 1.377.143 1.975.419.597.277 1.047.776 1.36 1.477.339-.499.8-.941 1.379-1.323.579-.383 1.267-.573 2.061-.573.604 0 1.163.075 1.68.223a3.34 3.34 0 0 1 1.324.707c.368.327.652.745.861 1.268.203.523.307 1.151.307 1.889v7.637h-3.132v-6.468c0-.381-.013-.745-.043-1.083a2.315 2.315 0 0 0-.246-.893l.006.013a1.484 1.484 0 0 0-.577-.593l-.007-.004c-.259-.147-.609-.221-1.047-.221-.443 0-.8.085-1.071.252-.267.166-.483.39-.635.656l-.005.009a2.558 2.558 0 0 0-.307.915l-.002.013a7.156 7.156 0 0 0-.08 1.044v6.359h-3.133v-6.4c0-.339-.005-.671-.024-1.003a2.772 2.772 0 0 0-.197-.936l.007.019a1.41 1.41 0 0 0-.548-.667l-.006-.003c-.259-.167-.635-.253-1.139-.253-.148 0-.345.032-.585.099-.24.068-.48.191-.707.376-.228.184-.425.449-.585.793-.16.345-.24.8-.24 1.36v6.621H7.279v-11.42zm20.923 20.852V.734H28.96V.001H32V32h-3.04v-.733z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_notification" xmlns="http://www.w3.org/2000/svg"><path d="m22.615 19.384 2.894 2.894v1.413H2.49v-1.413l2.894-2.894V12.25q0-3.365 1.716-5.856t4.745-3.231v-1.01q0-.875.606-1.514T13.999 0t1.548.639.606 1.514v1.01q3.029.74 4.745 3.231t1.716 5.856v7.134zM14 27.999q-1.211 0-2.053-.808t-.841-2.019h5.788q0 1.144-.875 1.986T14 27.999z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_path" xmlns="http://www.w3.org/2000/svg"><path d="M28 12.62h-9.793V8.414h-2.826v11.173h2.826v-4.206H28V26.62h-9.793v-4.206H12.62v-14H9.794v4.206H.001V1.381h9.793v4.206h8.413V1.381H28V12.62z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052 0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275 0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432 0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981 0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976 0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_shield" xmlns="http://www.w3.org/2000/svg"><path d="M22.167 15.166V3.5h-8.166v20.726c.93-.492 2.424-1.349 3.883-2.497 1.95-1.531 4.284-3.919 4.284-6.562zm3.499-13.999v14c0 7.674-10.737 12.523-11.192 12.724-.146.073-.31.109-.474.109s-.328-.036-.474-.109c-.456-.201-11.192-5.049-11.192-12.724v-14C2.334.529 2.863 0 3.501 0H24.5c.638 0 1.167.529 1.167 1.167z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_star" xmlns="http://www.w3.org/2000/svg"><path d="M14 22.052 5.324 27.31l2.3-9.859L0 10.813l10.056-.854L14 .692l3.944 9.267L28 10.813l-7.624 6.638 2.3 9.859z"/></svg><svg viewBox="-7.27 -7.27 42.55 42.55" id="gdoc_tag" xmlns="http://www.w3.org/2000/svg"><path d="M17.52 17.52v-7.041h-7.041v7.041h7.041zM28 10.479h-7.041v7.041H28v3.439h-7.041V28H17.52v-7.041h-7.041V28H7.04v-7.041H-.001V17.52H7.04v-7.041H-.001V7.04H7.04V-.001h3.439V7.04h7.041V-.001h3.439V7.04H28v3.439z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_timer" xmlns="http://www.w3.org/2000/svg"><path d="M16 29q4.428 0 7.536-3.143t3.107-7.571-3.107-7.536T16 7.643 8.464 10.75t-3.107 7.536 3.107 7.571T16 29zM26.714 9.786q1.214 1.571 2.107 4.036t.893 4.464q0 5.643-4 9.678T16 32t-9.714-4.036-4-9.678 4-9.678T16 4.572q1.929 0 4.464.929t4.107 2.143l2.143-2.214q1.143.929 2.143 2.143zM14.5 19.857v-9.143h3v9.143h-3zM20.571.001v3.071h-9.143V.001h9.143z"/></svg><svg viewBox="-7.27 -7.27 46.55 46.55" id="gdoc_xmpp" xmlns="http://www.w3.org/2000/svg"><path d="M31.995 4.237c-.449.175-1.12.433-1.936.745-1.544.591-2.328.891-2.924 1.093-.613.208-1.287.409-2.635.813-.911.272-1.672.495-2.212.651-.031.875 0 2.177-.292 3.635a21.837 21.837 0 0 1-2.016 5.765c-1.496 2.944-3.236 4.817-3.88 5.476-.056-.059-.112-.117-.168-.179-.707-.763-2.403-2.703-3.815-5.683-1.053-2.223-1.484-4.044-1.605-4.584-.356-1.589-.427-2.955-.427-4.117 0-.075-.036-.129-.101-.149-.721-.223-1.765-.519-2.887-.853-1.271-.379-2.193-.744-3.408-1.2-.493-.185-1.409-.547-2.217-.859C.723 4.499.113 4.236.041 4.236c-.005 0-.015 0-.023.012a.131.131 0 0 0-.019.076c.009.593.08 1.361.256 2.365.615 3.503 2.688 7.061 4.36 9.244 0 0 3.717 5.035 9.128 8.144l.303.176c-.009.008-.02.015-.028.021-1.717 1.316-3.201 1.977-3.579 2.14a15.71 15.71 0 0 1-2.219.772v.407a25.31 25.31 0 0 0 2.72-.487 26.72 26.72 0 0 0 5.075-1.792c.136.067.276.136.42.204 1.527.725 3.571 1.627 6.073 2.048.613.103 1.136.165 1.507.195a.109.109 0 0 0 .115-.091.55.55 0 0 0 .004-.217.107.107 0 0 0-.063-.073c-.505-.209-1.201-.4-1.983-.719-.935-.381-2.241-1.067-3.648-2.128a13.528 13.528 0 0 1-.367-.287c4.64-2.656 7.989-6.588 7.989-6.588 1.735-2.036 4.441-5.623 5.431-9.795.349-1.473.539-2.741.5-3.628z"/></svg></defs></svg>




    <div
      class="wrapper "
    >
      <input type="checkbox" class="hidden" id="menu-control" />
      <input type="checkbox" class="hidden" id="menu-header-control" />
      
      <header class="gdoc-header">
  <div class="container flex align-center justify-between">
    
      <label for="menu-control" class="gdoc-nav__control" tabindex="0">
        <svg class="gdoc-icon gdoc_menu">
          <title>Open Navigation</title>
          <use xlink:href="#gdoc_menu"></use>
        </svg>
        <svg class="gdoc-icon gdoc_arrow_back">
          <title>Close Navigation</title>
          <use xlink:href="#gdoc_arrow_back"></use>
        </svg>
      </label>
    
    <div>
      <a class="gdoc-brand gdoc-header__link" href="../../../distribution.html">
        <span class="flex align-center">
          <img
            class="gdoc-brand__img"
            src="../../brand.svg"
            alt=""
          />
          <span class="gdoc-brand__title">CNCF Distribution</span>
        </span>
      </a>
    </div>
    <div class="gdoc-menu-header">
      <span class="gdoc-menu-header__items">
        
          

  
  
  
  

  
    
      
      
      

      
      

      

      
        <span>
          <a
            href="
              https://github.com/distribution/distribution/
            "
            class="gdoc-header__link"
          >
            <svg class="gdoc-icon gdoc_github">
              <title>GitHub</title>
              <use xlink:href="#gdoc_github"></use>
            </svg>
          </a>
        </span>
      
    
  






        


        <span id="gdoc-color-theme">
          <svg class="gdoc-icon gdoc_brightness_dark">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_dark"></use>
          </svg>
          <svg class="gdoc-icon gdoc_brightness_light">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_light"></use>
          </svg>
          <svg class="gdoc-icon gdoc_brightness_auto">
            <title>Toggle Dark/Light/Auto mode</title>
            <use xlink:href="#gdoc_brightness_auto"></use>
          </svg>
        </span>

        <span class="gdoc-menu-header__home">
          <a href="../../../distribution.html" class="gdoc-header__link">
            <svg class="gdoc-icon gdoc_home">
              <title>Back to homepage</title>
              <use xlink:href="#gdoc_home"></use>
            </svg>
          </a>
        </span>

        



        <span class="gdoc-menu-header__control">
          <label for="menu-header-control">
            <svg class="gdoc-icon gdoc_keyboard_arrow_right">
              <use xlink:href="#gdoc_keyboard_arrow_right"></use>
              <title>Close Menu Bar</title>
            </svg>
          </label>
        </span>
      </span>
      <label for="menu-header-control" class="gdoc-menu-header__control">
        <svg class="gdoc-icon gdoc_keyboard_arrow_left">
          <use xlink:href="#gdoc_keyboard_arrow_left"></use>
          <title>Open Menu Bar</title>
        </svg>
      </label>
    </div>
  </div>
</header>



      <main class="container flex flex-even">
        
          <aside class="gdoc-nav">
            <nav>
  
  <div class="gdoc-search flex align-center">
    <svg class="gdoc-icon gdoc_search"><use xlink:href="#gdoc_search"></use></svg>
    <input
      type="text"
      id="gdoc-search-input"
      class="gdoc-search__input"
      placeholder="Search..."
      aria-label="Search"
      maxlength="64"
      data-site-base-url="https://distribution.github.io/distribution"
      data-site-lang="en"
    />
    <ul id="gdoc-search-results" class="gdoc-search__list"></ul>
  </div>




  <section class="gdoc-nav--main">
    <h2>Navigation</h2>
    
      

  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../index.html"
                    class="gdoc-nav__entry"
                  >
                    About Registry
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="index.html"
                    class="gdoc-nav__entry is-active"
                  >
                    Configuring a registry
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../deploying/index.html"
                    class="gdoc-nav__entry"
                  >
                    Deploy a registry server
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../garbage-collection/index.html"
                    class="gdoc-nav__entry"
                  >
                    Garbage collection
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../help/index.html"
                    class="gdoc-nav__entry"
                  >
                    Get help
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../compatibility/index.html"
                    class="gdoc-nav__entry"
                  >
                    Registry compatibility
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../insecure/index.html"
                    class="gdoc-nav__entry"
                  >
                    Test an insecure registry
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../notifications/index.html"
                    class="gdoc-nav__entry"
                  >
                    Work with notifications
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../recipes/index.html"
                    class="gdoc-nav__entry"
                  >
                    Recipes overview
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../recipes/apache/index.html"
                    class="gdoc-nav__entry"
                  >
                    Authenticate proxy with apache
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../recipes/nginx/index.html"
                    class="gdoc-nav__entry"
                  >
                    Authenticate proxy with nginx
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../recipes/osx-setup-guide/index.html"
                    class="gdoc-nav__entry"
                  >
                    macOS setup guide
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../recipes/mirror/index.html"
                    class="gdoc-nav__entry"
                  >
                    Registry as a pull through cache
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../recipes/systemd/index.html"
                    class="gdoc-nav__entry"
                  >
                    Start registry via systemd
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../spec/index.html"
                    class="gdoc-nav__entry"
                  >
                    Reference Overview
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../spec/auth/index.html"
                    class="gdoc-nav__entry"
                  >
                    Distribution Registry Token Authentication
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../spec/auth/oauth/index.html"
                    class="gdoc-nav__entry"
                  >
                    Oauth2 Token Authentication
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../spec/auth/jwt/index.html"
                    class="gdoc-nav__entry"
                  >
                    Token Authentication Implementation
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../spec/auth/token/index.html"
                    class="gdoc-nav__entry"
                  >
                    Token Authentication Specification
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../spec/auth/scope/index.html"
                    class="gdoc-nav__entry"
                  >
                    Token Scope Documentation
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../spec/api/index.html"
                    class="gdoc-nav__entry"
                  >
                    HTTP API V2
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../spec/manifest-v2-2/index.html"
                    class="gdoc-nav__entry"
                  >
                    Image Manifest V 2, Schema 2
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../spec/deprecated-schema-v1/index.html"
                    class="gdoc-nav__entry"
                  >
                    Image manifest version 2, schema 1
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../storage-drivers/index.html"
                    class="gdoc-nav__entry"
                  >
                    Registry storage driver
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../storage-drivers/filesystem/index.html"
                    class="gdoc-nav__entry"
                  >
                    Filesystem storage driver
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../storage-drivers/gcs/index.html"
                    class="gdoc-nav__entry"
                  >
                    Google Cloud Storage driver
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../storage-drivers/inmemory/index.html"
                    class="gdoc-nav__entry"
                  >
                    In-memory storage driver (testing only)
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../storage-drivers/azure/index.html"
                    class="gdoc-nav__entry"
                  >
                    Microsoft Azure storage driver
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../storage-drivers/s3/index.html"
                    class="gdoc-nav__entry"
                  >
                    S3 storage driver
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../storage-drivers/middleware/index.html"
                    class="gdoc-nav__entry"
                  >
                    Storage middleware
                  </a>
                </span>
              
              
            </label>

            
              
  


  <ul class="gdoc-nav__list">
    
    
      

      
        
      

      
        
          
          
          
          
          
          


          <li>
            <input
              type="checkbox"
              
                class="hidden"
              
            />
            <label
              
            >
              
                <span class="flex">
                  <a
                    href="../../storage-drivers/middleware/rewrite/index.html"
                    class="gdoc-nav__entry"
                  >
                    Rewrite middleware
                  </a>
                </span>
              
              
            </label>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
  </ul>

            
          </li>
        
      
    
  </ul>






    
  </section>

  


  <section class="gdoc-nav--more">
    
  </section>
</nav>

          </aside>
        


        <div class="gdoc-page">
          
  


  






<div
  class="gdoc-page__header flex flex-wrap
  
    justify-between
  
  
  "
  itemprop="breadcrumb"
>
  
    <div>
      <svg class="gdoc-icon gdoc_path hidden-mobile"><use xlink:href="#gdoc_path"></use></svg>
      <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
        
        
        
        
  
  
    
    
    
    
  
  
    
    
    
    
  
  
    <li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/distribution/' href='../../../distribution.html'><span itemprop='name'>Distribution Registry</span></a><meta itemprop='position' content='2' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/distribution/about/' href='../index.html'><span itemprop='name'>About Registry</span></a><meta itemprop='position' content='3' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><span itemprop='name'>Configuring a registry</span><meta itemprop='position' content='4' /></li>
  

  

  

      </ol>
    </div>
  
  
    <div>
      <span class="editpage">
        <svg class="gdoc-icon gdoc_code"><use xlink:href="#gdoc_code"></use></svg>
        <a
          href="https://github.com/distribution/distribution/edit/main/docs/content/about/configuration.md"
        >
          Edit page
        </a>
      </span>
    </div>
  
</div>



  <article
    class="gdoc-markdown gdoc-markdown__align--left"
  >
    <h1>Configuring a registry</h1>
    <p>The Registry configuration is based on a YAML file, detailed below. While it
comes with sane default values out of the box, you should review it exhaustively
before moving your systems to production.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="override-specific-configuration-options"
    >
        Override specific configuration options
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#override-specific-configuration-options" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Override specific configuration options" aria-label="Anchor to: Override specific configuration options" href="index.html#override-specific-configuration-options">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>In a typical setup where you run your registry as a container, you can
specify a configuration variable from the environment by passing <code>-e</code> arguments
to your <code>docker run</code> stanza or from within a Dockerfile using the <code>ENV</code>
instruction.</p>
<p>To override a configuration option, create an environment variable named
<code>REGISTRY_variable</code> where <code>variable</code> is the name of the configuration option
and the <code>_</code> (underscore) represents indention levels. For example, you can
configure the <code>rootdirectory</code> of the <code>filesystem</code> storage backend:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">storage</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">filesystem</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rootdirectory</span><span class="p">:</span><span class="w"> </span><span class="l">/var/lib/registry</span><span class="w">
</span></span></span></code></pre></div><p>To override this value, set an environment variable like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY</span><span class="o">=</span>/somewhere
</span></span></code></pre></div><p>This variable overrides the <code>/var/lib/registry</code> value to the <code>/somewhere</code>
directory.</p>
<blockquote>
<p><strong>Note</strong>: Create a base configuration file with environment variables that can
be configured to tweak individual values. Overriding configuration sections
with environment variables is not recommended.</p>
</blockquote>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="overriding-the-entire-configuration-file"
    >
        Overriding the entire configuration file
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#overriding-the-entire-configuration-file" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Overriding the entire configuration file" aria-label="Anchor to: Overriding the entire configuration file" href="index.html#overriding-the-entire-configuration-file">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>If the default configuration is not a sound basis for your usage, or if you are
having issues overriding keys from the environment, you can specify an alternate
YAML configuration file by mounting it as a volume in the container.</p>
<p>Typically, create a new configuration file from scratch,named <code>config.yml</code>, then
specify it in the <code>docker run</code> command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker run -d -p 5000:5000 --restart<span class="o">=</span>always --name registry <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>             -v <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/config.yml:/etc/distribution/config.yml <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>             registry:2
</span></span></code></pre></div><p>Use this
<a href="https://github.com/distribution/distribution/blob/master/cmd/registry/config-example.yml" target="_blank">example YAML file</a>
as a starting point.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="list-of-configuration-options"
    >
        List of configuration options
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#list-of-configuration-options" class="gdoc-page__anchor clip flex align-center" title="Anchor to: List of configuration options" aria-label="Anchor to: List of configuration options" href="index.html#list-of-configuration-options">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>These are all configuration options for the registry. Some options in the list
are mutually exclusive. Read the detailed reference information about each
option before finalizing your configuration.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">0.1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">log</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">accesslog</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l">debug</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">formatter</span><span class="p">:</span><span class="w"> </span><span class="l">text</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">registry</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l">staging</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">hooks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">mail</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">levels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">panic</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">smtp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="l">mail.example.com:25</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l">mailuser</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l">password</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">insecure</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l">sender@example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">to</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="l">errors@example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">loglevel: debug # deprecated</span><span class="p">:</span><span class="w"> </span><span class="l">use &#34;log&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">storage</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">filesystem</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rootdirectory</span><span class="p">:</span><span class="w"> </span><span class="l">/var/lib/registry</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">maxthreads</span><span class="p">:</span><span class="w"> </span><span class="m">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">azure</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">accountname</span><span class="p">:</span><span class="w"> </span><span class="l">accountname</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">accountkey</span><span class="p">:</span><span class="w"> </span><span class="l">base64encodedaccountkey</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container</span><span class="p">:</span><span class="w"> </span><span class="l">containername</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rootdirectory</span><span class="p">:</span><span class="w"> </span><span class="l">/az/object/name/prefix</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">credentials</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">client_secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">clientid</span><span class="p">:</span><span class="w"> </span><span class="l">client_id_string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">tenantid</span><span class="p">:</span><span class="w"> </span><span class="l">tenant_id_string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="l">secret_string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">copy_status_poll_max_retry</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">copy_status_poll_delay</span><span class="p">:</span><span class="w"> </span><span class="l">100ms</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gcs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="l">bucketname</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">keyfile</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/keyfile</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">credentials</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">service_account</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">project_id</span><span class="p">:</span><span class="w"> </span><span class="l">project_id_string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">private_key_id</span><span class="p">:</span><span class="w"> </span><span class="l">private_key_id_string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">private_key</span><span class="p">:</span><span class="w"> </span><span class="l">private_key_string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">client_email</span><span class="p">:</span><span class="w"> </span><span class="l">client@example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">client_id</span><span class="p">:</span><span class="w"> </span><span class="l">client_id_string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">auth_uri</span><span class="p">:</span><span class="w"> </span><span class="l">http://example.com/auth_uri</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">token_uri</span><span class="p">:</span><span class="w"> </span><span class="l">http://example.com/token_uri</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">auth_provider_x509_cert_url</span><span class="p">:</span><span class="w"> </span><span class="l">http://example.com/provider_cert_url</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">client_x509_cert_url</span><span class="p">:</span><span class="w"> </span><span class="l">http://example.com/client_cert_url</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rootdirectory</span><span class="p">:</span><span class="w"> </span><span class="l">/gcs/object/name/prefix</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">chunksize</span><span class="p">:</span><span class="w"> </span><span class="m">5242880</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">s3</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">accesskey</span><span class="p">:</span><span class="w"> </span><span class="l">awsaccesskey</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">secretkey</span><span class="p">:</span><span class="w"> </span><span class="l">awssecretkey</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l">us-west-1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">regionendpoint</span><span class="p">:</span><span class="w"> </span><span class="l">http://myobjects.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">forcepathstyle</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">accelerate</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="l">bucketname</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">encrypt</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">keyid</span><span class="p">:</span><span class="w"> </span><span class="l">mykeyid</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">secure</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">v4auth</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">chunksize</span><span class="p">:</span><span class="w"> </span><span class="m">5242880</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">multipartcopychunksize</span><span class="p">:</span><span class="w"> </span><span class="m">33554432</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">multipartcopymaxconcurrency</span><span class="p">:</span><span class="w"> </span><span class="m">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">multipartcopythresholdsize</span><span class="p">:</span><span class="w"> </span><span class="m">33554432</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rootdirectory</span><span class="p">:</span><span class="w"> </span><span class="l">/s3/object/name/prefix</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">usedualstack</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">loglevel</span><span class="p">:</span><span class="w"> </span><span class="l">debug</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">inmemory</span><span class="p">:</span><span class="w">  </span><span class="c"># This driver takes no parameters</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tag</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">concurrencylimit</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">delete</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">redirect</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disable</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">cache</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">blobdescriptor</span><span class="p">:</span><span class="w"> </span><span class="l">redis</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">blobdescriptorsize</span><span class="p">:</span><span class="w"> </span><span class="m">10000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">maintenance</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">uploadpurging</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">age</span><span class="p">:</span><span class="w"> </span><span class="l">168h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l">24h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">dryrun</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">readonly</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">auth</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">silly</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="l">silly-realm</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">silly-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">token</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">autoredirect</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="l">token-realm</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">token-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">issuer</span><span class="p">:</span><span class="w"> </span><span class="l">registry-token-issuer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rootcertbundle</span><span class="p">:</span><span class="w"> </span><span class="l">/root/certs/bundle</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">jwks</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/jwks</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">signingalgorithms</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">EdDSA</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">HS256</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">htpasswd</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="l">basic-realm</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/htpasswd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">middleware</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">registry</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ARegistryMiddleware</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">foo</span><span class="p">:</span><span class="w"> </span><span class="l">bar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">repository</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ARepositoryMiddleware</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">foo</span><span class="p">:</span><span class="w"> </span><span class="l">bar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">storage</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">cloudfront</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">baseurl</span><span class="p">:</span><span class="w"> </span><span class="l">https://my.cloudfronted.domain.com/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">privatekey</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">keypairid</span><span class="p">:</span><span class="w"> </span><span class="l">cloudfrontkeypairid</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l">3000s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">ipfilteredby</span><span class="p">:</span><span class="w"> </span><span class="l">awsregion</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">awsregion</span><span class="p">:</span><span class="w"> </span><span class="l">us-east-1, use-east-2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">updatefrequency</span><span class="p">:</span><span class="w"> </span><span class="l">12h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">iprangesurl</span><span class="p">:</span><span class="w"> </span><span class="l">https://ip-ranges.amazonaws.com/ip-ranges.json</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">storage</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">redirect</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">baseurl</span><span class="p">:</span><span class="w"> </span><span class="l">https://example.com/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">http</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="l">localhost:5000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l">/my/nested/registry/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l">https://myregistryaddress.org:5000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="l">asecretforlocaldevelopment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">relativeurls</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">draintimeout</span><span class="p">:</span><span class="w"> </span><span class="l">60s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">certificate</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/x509/public</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/x509/private</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">clientcas</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/path/to/ca.pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/path/to/another/ca.pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">letsencrypt</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">cachefile</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/cache-file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">email</span><span class="p">:</span><span class="w"> </span><span class="l">emailused@letsencrypt.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">myregistryaddress.org]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">directoryurl</span><span class="p">:</span><span class="w"> </span><span class="l">https://acme-v02.api.letsencrypt.org/directory</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">debug</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="l">localhost:5001</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">prometheus</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/metrics</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">headers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">X-Content-Type-Options</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">nosniff]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">http2</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">h2c</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">notifications</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">events</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">includereferences</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">endpoints</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">alistener</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">https://my.listener.com/event</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">headers</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;http.Header&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l">1s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">backoff</span><span class="p">:</span><span class="w"> </span><span class="l">1s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">ignoredmediatypes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">application/octet-stream</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">ignore</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">mediatypes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span>- <span class="l">application/octet-stream</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">actions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span>- <span class="l">pull</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">redis</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">certificate</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/cert.crt</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/key.pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">clientcas</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/path/to/ca.pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">addrs</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">localhost:6379]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l">asecret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">db</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">dialtimeout</span><span class="p">:</span><span class="w"> </span><span class="l">10ms</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">readtimeout</span><span class="p">:</span><span class="w"> </span><span class="l">10ms</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">writetimeout</span><span class="p">:</span><span class="w"> </span><span class="l">10ms</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">maxidleconns</span><span class="p">:</span><span class="w"> </span><span class="m">16</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">poolsize</span><span class="p">:</span><span class="w"> </span><span class="m">64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">connmaxidletime</span><span class="p">:</span><span class="w"> </span><span class="l">300s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">health</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">storagedriver</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l">10s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">file</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/checked/file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l">10s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">http</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="l">http://server.to.check/must/return/200</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">headers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Authorization</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">statuscode</span><span class="p">:</span><span class="w"> </span><span class="m">200</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l">3s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l">10s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tcp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="l">redis-server.domain.com:6379</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l">3s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l">10s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">proxy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remoteurl</span><span class="p">:</span><span class="w"> </span><span class="l">https://registry-1.docker.io</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">username]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">password]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l">168h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">validation</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">manifests</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">urls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">allow</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">^https?://([^/]+\.)*example\.com/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">deny</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">^https?://www\.example\.com/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">indexes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">platforms</span><span class="p">:</span><span class="w"> </span><span class="l">List</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">platformlist</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">architecture</span><span class="p">:</span><span class="w"> </span><span class="l">amd64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="l">linux</span><span class="w">
</span></span></span></code></pre></div><p>In some instances a configuration option is <strong>optional</strong> but it contains child
options marked as <strong>required</strong>. In these cases, you can omit the parent with
all its children. However, if the parent is included, you must also include all
the children marked <strong>required</strong>.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="version"
    >
        <code>version</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#version" class="gdoc-page__anchor clip flex align-center" title="Anchor to: version" aria-label="Anchor to: version" href="index.html#version">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">0.1</span><span class="w">
</span></span></span></code></pre></div><p>The <code>version</code> option is <strong>required</strong>. It specifies the configuration&rsquo;s version.
It is expected to remain a top-level field, to allow for a consistent version
check before parsing the remainder of the configuration file.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="log"
    >
        <code>log</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#log" class="gdoc-page__anchor clip flex align-center" title="Anchor to: log" aria-label="Anchor to: log" href="index.html#log">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>log</code> subsection configures the behavior of the logging system. The logging
system outputs everything to stderr. You can adjust the granularity and format
with this configuration section.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">log</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">accesslog</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l">debug</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">formatter</span><span class="p">:</span><span class="w"> </span><span class="l">text</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">fields</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">registry</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l">staging</span><span class="w">
</span></span></span></code></pre></div><div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>level</code></td>
<td>no</td>
<td>Sets the sensitivity of logging output. Permitted values are <code>error</code>, <code>warn</code>, <code>info</code>, and <code>debug</code>. The default is <code>info</code>.</td>
</tr>
<tr>
<td><code>formatter</code></td>
<td>no</td>
<td>This selects the format of logging output. The format primarily affects how keyed attributes for a log line are encoded. Options are <code>text</code>, <code>json</code>, and <code>logstash</code>. The default is <code>text</code>.</td>
</tr>
<tr>
<td><code>fields</code></td>
<td>no</td>
<td>A map of field names to values. These are added to every log line for the context. This is useful for identifying log messages source after being mixed in other systems.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="accesslog"
    >
        <code>accesslog</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#accesslog" class="gdoc-page__anchor clip flex align-center" title="Anchor to: accesslog" aria-label="Anchor to: accesslog" href="index.html#accesslog">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">accesslog</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span></code></pre></div><p>Within <code>log</code>, <code>accesslog</code> configures the behavior of the access logging
system. By default, the access logging system outputs to stdout in
<a href="https://httpd.apache.org/docs/2.4/logs.html#combined" target="_blank">Combined Log Format</a>.
Access logging can be disabled by setting the boolean flag <code>disabled</code> to <code>true</code>.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="hooks"
    >
        <code>hooks</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#hooks" class="gdoc-page__anchor clip flex align-center" title="Anchor to: hooks" aria-label="Anchor to: hooks" href="index.html#hooks">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">hooks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">mail</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">levels</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">panic</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">smtp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="l">smtp.sendhost.com:25</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l">sendername</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l">password</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">insecure</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="l">name@sendhost.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">to</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">name@receivehost.com</span><span class="w">
</span></span></span></code></pre></div><p>The <code>hooks</code> subsection configures the logging hooks&rsquo; behavior. This subsection
includes a sequence handler which you can use for sending mail, for example.
Refer to <code>loglevel</code> to configure the level of messages printed.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="loglevel"
    >
        <code>loglevel</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#loglevel" class="gdoc-page__anchor clip flex align-center" title="Anchor to: loglevel" aria-label="Anchor to: loglevel" href="index.html#loglevel">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<blockquote>
<p><strong>DEPRECATED:</strong> Please use <a href="index.html#log">log</a> instead.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">loglevel</span><span class="p">:</span><span class="w"> </span><span class="l">debug</span><span class="w">
</span></span></span></code></pre></div><p>Permitted values are <code>error</code>, <code>warn</code>, <code>info</code> and <code>debug</code>. The default is
<code>info</code>.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="storage"
    >
        <code>storage</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#storage" class="gdoc-page__anchor clip flex align-center" title="Anchor to: storage" aria-label="Anchor to: storage" href="index.html#storage">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">storage</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">filesystem</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rootdirectory</span><span class="p">:</span><span class="w"> </span><span class="l">/var/lib/registry</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">azure</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">accountname</span><span class="p">:</span><span class="w"> </span><span class="l">accountname</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">accountkey</span><span class="p">:</span><span class="w"> </span><span class="l">base64encodedaccountkey</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container</span><span class="p">:</span><span class="w"> </span><span class="l">containername</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gcs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="l">bucketname</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">keyfile</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/keyfile</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">credentials</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">service_account</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">project_id</span><span class="p">:</span><span class="w"> </span><span class="l">project_id_string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">private_key_id</span><span class="p">:</span><span class="w"> </span><span class="l">private_key_id_string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">private_key</span><span class="p">:</span><span class="w"> </span><span class="l">private_key_string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">client_email</span><span class="p">:</span><span class="w"> </span><span class="l">client@example.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">client_id</span><span class="p">:</span><span class="w"> </span><span class="l">client_id_string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">auth_uri</span><span class="p">:</span><span class="w"> </span><span class="l">http://example.com/auth_uri</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">token_uri</span><span class="p">:</span><span class="w"> </span><span class="l">http://example.com/token_uri</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">auth_provider_x509_cert_url</span><span class="p">:</span><span class="w"> </span><span class="l">http://example.com/provider_cert_url</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">client_x509_cert_url</span><span class="p">:</span><span class="w"> </span><span class="l">http://example.com/client_cert_url</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rootdirectory</span><span class="p">:</span><span class="w"> </span><span class="l">/gcs/object/name/prefix</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">s3</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">accesskey</span><span class="p">:</span><span class="w"> </span><span class="l">awsaccesskey</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">secretkey</span><span class="p">:</span><span class="w"> </span><span class="l">awssecretkey</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l">us-west-1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">regionendpoint</span><span class="p">:</span><span class="w"> </span><span class="l">http://myobjects.local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">forcepathstyle</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">accelerate</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="l">bucketname</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">encrypt</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">keyid</span><span class="p">:</span><span class="w"> </span><span class="l">mykeyid</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">secure</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">v4auth</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">chunksize</span><span class="p">:</span><span class="w"> </span><span class="m">5242880</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">multipartcopychunksize</span><span class="p">:</span><span class="w"> </span><span class="m">33554432</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">multipartcopymaxconcurrency</span><span class="p">:</span><span class="w"> </span><span class="m">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">multipartcopythresholdsize</span><span class="p">:</span><span class="w"> </span><span class="m">33554432</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rootdirectory</span><span class="p">:</span><span class="w"> </span><span class="l">/s3/object/name/prefix</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">loglevel</span><span class="p">:</span><span class="w"> </span><span class="l">debug</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">inmemory</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">delete</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">cache</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">blobdescriptor</span><span class="p">:</span><span class="w"> </span><span class="l">inmemory</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">blobdescriptorsize</span><span class="p">:</span><span class="w"> </span><span class="m">10000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">maintenance</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">uploadpurging</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">age</span><span class="p">:</span><span class="w"> </span><span class="l">168h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l">24h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">dryrun</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">readonly</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">redirect</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disable</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span></code></pre></div><p>The <code>storage</code> option is <strong>required</strong> and defines which storage backend is in
use. You must configure exactly one backend. If you configure more, the registry
returns an error. You can choose any of these backend storage drivers:</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Storage driver</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>filesystem</code></td>
<td>Uses the local disk to store registry files. It is ideal for development and may be appropriate for some small-scale production applications. See the <a href="../../storage-drivers/filesystem/index.html">driver&rsquo;s reference documentation</a>.</td>
</tr>
<tr>
<td><code>azure</code></td>
<td>Uses Microsoft Azure Blob Storage. See the <a href="../../storage-drivers/azure/index.html">driver&rsquo;s reference documentation</a>.</td>
</tr>
<tr>
<td><code>gcs</code></td>
<td>Uses Google Cloud Storage. See the <a href="../../storage-drivers/gcs/index.html">driver&rsquo;s reference documentation</a>.</td>
</tr>
<tr>
<td><code>s3</code></td>
<td>Uses Amazon Simple Storage Service (S3) and compatible Storage Services. See the <a href="../../storage-drivers/s3/index.html">driver&rsquo;s reference documentation</a>.</td>
</tr>
</tbody>
</table> </div>
<p>For testing only, you can use the <a href="../../storage-drivers/inmemory/index.html"><code>inmemory</code> storage
driver</a>.
If you would like to run a registry from volatile memory, use the
<a href="../../storage-drivers/filesystem/index.html"><code>filesystem</code> driver</a>
on a ramdisk.</p>
<p>If you are deploying a registry on Windows, a Windows volume mounted from the
host is not recommended. Instead, you can use a S3 or Azure backing
data-store. If you do use a Windows volume, the length of the <code>PATH</code> to
the mount point must be within the <code>MAX_PATH</code> limits (typically 255 characters),
or this error will occur:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">mkdir /XXX protocol error and your registry will not function properly.
</span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="maintenance"
    >
        <code>maintenance</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#maintenance" class="gdoc-page__anchor clip flex align-center" title="Anchor to: maintenance" aria-label="Anchor to: maintenance" href="index.html#maintenance">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Currently, upload purging and read-only mode are the only <code>maintenance</code>
functions available.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="uploadpurging"
    >
        <code>uploadpurging</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#uploadpurging" class="gdoc-page__anchor clip flex align-center" title="Anchor to: uploadpurging" aria-label="Anchor to: uploadpurging" href="index.html#uploadpurging">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Upload purging is a background process that periodically removes orphaned files
from the upload directories of the registry. Upload purging is enabled by
default. To configure upload directory purging, the following parameters must
be set.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>yes</td>
<td>Set to <code>true</code> to enable upload purging. Defaults to <code>true</code>.</td>
</tr>
<tr>
<td><code>age</code></td>
<td>yes</td>
<td>Upload directories which are older than this age will be deleted.Defaults to <code>168h</code> (1 week).</td>
</tr>
<tr>
<td><code>interval</code></td>
<td>yes</td>
<td>The interval between upload directory purging. Defaults to <code>24h</code>.</td>
</tr>
<tr>
<td><code>dryrun</code></td>
<td>yes</td>
<td>Set <code>dryrun</code> to <code>true</code> to obtain a summary of what directories will be deleted. Defaults to <code>false</code>.</td>
</tr>
</tbody>
</table> </div>
<blockquote>
<p><strong>Note</strong>: <code>age</code> and <code>interval</code> are strings containing a number with optional
fraction and a unit suffix. Some examples: <code>45m</code>, <code>2h10m</code>, <code>168h</code>.</p>
</blockquote>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="readonly"
    >
        <code>readonly</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#readonly" class="gdoc-page__anchor clip flex align-center" title="Anchor to: readonly" aria-label="Anchor to: readonly" href="index.html#readonly">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>If the <code>readonly</code> section under <code>maintenance</code> has <code>enabled</code> set to <code>true</code>,
clients will not be allowed to write to the registry. This mode is useful to
temporarily prevent writes to the backend storage so a garbage collection pass
can be run.  Before running garbage collection, the registry should be
restarted with readonly&rsquo;s <code>enabled</code> set to true. After the garbage collection
pass finishes, the registry may be restarted again, this time with <code>readonly</code>
removed from the configuration (or set to false).</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="delete"
    >
        <code>delete</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#delete" class="gdoc-page__anchor clip flex align-center" title="Anchor to: delete" aria-label="Anchor to: delete" href="index.html#delete">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Use the <code>delete</code> structure to enable the deletion of image blobs and manifests
by digest. It defaults to false, but it can be enabled by writing the following
on the configuration file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">delete</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="cache"
    >
        <code>cache</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#cache" class="gdoc-page__anchor clip flex align-center" title="Anchor to: cache" aria-label="Anchor to: cache" href="index.html#cache">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Use the <code>cache</code> structure to enable caching of data accessed in the storage
backend. Currently, the only available cache provides fast access to layer
metadata, which uses the <code>blobdescriptor</code> field if configured.</p>
<p>You can set <code>blobdescriptor</code> field to <code>redis</code> or <code>inmemory</code>. If set to <code>redis</code>,a
Redis pool caches layer metadata. If set to <code>inmemory</code>, an in-memory map caches
layer metadata.</p>
<blockquote>
<p><strong>NOTE</strong>: Formerly, <code>blobdescriptor</code> was known as <code>layerinfo</code>. While these
are equivalent, <code>layerinfo</code> has been deprecated.</p>
</blockquote>
<p>If <code>blobdescriptor</code> is set to <code>inmemory</code>, the optional <code>blobdescriptorsize</code>
parameter sets a limit on the number of descriptors to store in the cache.
The default value is 10000. If this parameter is set to 0, the cache is allowed
to grow with no size limit.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="tag"
    >
        <code>tag</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#tag" class="gdoc-page__anchor clip flex align-center" title="Anchor to: tag" aria-label="Anchor to: tag" href="index.html#tag">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>tag</code> subsection provides configuration to set concurrency limit for tag lookup.
When user calls into the registry to delete the manifest, which in turn then does a
lookup for all tags that reference the deleted manifest. To find the tag references,
the registry will iterate every tag in the repository and read it&rsquo;s link file to check
if it matches the deleted manifest (i.e. to see if uses the same sha256 digest).
So, the more tags in repository, the worse the performance will be (as there will
be more S3 API calls occurring for the tag directory lookups and tag file reads if
using S3 storage driver).</p>
<p>Therefore, add a single flag <code>concurrencylimit</code> to set concurrency limit to optimize tag
lookup performance under the <code>tag</code> section. When a value is not provided or equal to 0,
<code>GOMAXPROCS</code> will be used.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">tag</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">concurrencylimit</span><span class="p">:</span><span class="w"> </span><span class="m">8</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="redirect"
    >
        <code>redirect</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#redirect" class="gdoc-page__anchor clip flex align-center" title="Anchor to: redirect" aria-label="Anchor to: redirect" href="index.html#redirect">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>redirect</code> subsection provides configuration for managing redirects from
content backends. For backends that support it, redirecting is enabled by
default. In certain deployment scenarios, you may decide to route all data
through the Registry, rather than redirecting to the backend. This may be more
efficient when using a backend that is not co-located or when a registry
instance is aggressively caching.</p>
<p>To disable redirects, add a single flag <code>disable</code>, set to <code>true</code>
under the <code>redirect</code> section:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">redirect</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">disable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="auth"
    >
        <code>auth</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#auth" class="gdoc-page__anchor clip flex align-center" title="Anchor to: auth" aria-label="Anchor to: auth" href="index.html#auth">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">auth</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">silly</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="l">silly-realm</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">silly-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">token</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="l">token-realm</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">token-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">issuer</span><span class="p">:</span><span class="w"> </span><span class="l">registry-token-issuer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">rootcertbundle</span><span class="p">:</span><span class="w"> </span><span class="l">/root/certs/bundle</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">jwks</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/jwks</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">signingalgorithms</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">EdDSA</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">HS256</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">ES512</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">htpasswd</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="l">basic-realm</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/htpasswd</span><span class="w">
</span></span></span></code></pre></div><p>The <code>auth</code> option is <strong>optional</strong>. Possible auth providers include:</p>
<ul>
<li><a href="index.html#silly"><code>silly</code></a></li>
<li><a href="index.html#token"><code>token</code></a></li>
<li><a href="index.html#htpasswd"><code>htpasswd</code></a></li>
<li>[<code>none</code>]</li>
</ul>
<p>You can configure only one authentication provider.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="silly"
    >
        <code>silly</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#silly" class="gdoc-page__anchor clip flex align-center" title="Anchor to: silly" aria-label="Anchor to: silly" href="index.html#silly">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>silly</code> authentication provider is only appropriate for development. It simply checks
for the existence of the <code>Authorization</code> header in the HTTP request. It does not
check the header&rsquo;s value. If the header does not exist, the <code>silly</code> auth
responds with a challenge response, echoing back the realm, service, and scope
for which access was denied.</p>
<p>The following values are used to configure the response:</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>realm</code></td>
<td>yes</td>
<td>The realm in which the registry server authenticates.</td>
</tr>
<tr>
<td><code>service</code></td>
<td>yes</td>
<td>The service being authenticated.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="token"
    >
        <code>token</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#token" class="gdoc-page__anchor clip flex align-center" title="Anchor to: token" aria-label="Anchor to: token" href="index.html#token">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Token-based authentication allows you to decouple the authentication system from
the registry. It is an established authentication paradigm with a high degree of
security.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>realm</code></td>
<td>yes</td>
<td>The realm in which the registry server authenticates.</td>
</tr>
<tr>
<td><code>service</code></td>
<td>yes</td>
<td>The service being authenticated.</td>
</tr>
<tr>
<td><code>issuer</code></td>
<td>yes</td>
<td>The name of the token issuer. The issuer inserts this into the token so it must match the value configured for the issuer.</td>
</tr>
<tr>
<td><code>rootcertbundle</code></td>
<td>yes</td>
<td>The absolute path to the root certificate bundle. This bundle contains the public part of the certificates used to sign authentication tokens.</td>
</tr>
<tr>
<td><code>autoredirect</code></td>
<td>no</td>
<td>When set to <code>true</code>, <code>realm</code> will be set to the Host header of the request as the domain and a path of <code>/auth/token/</code>(or specified by <code>autoredirectpath</code>), the <code>realm</code> URL Scheme will use <code>X-Forwarded-Proto</code> header if set, otherwise it will be set to <code>https</code>.</td>
</tr>
<tr>
<td><code>autoredirectpath</code></td>
<td>no</td>
<td>The path to redirect to if <code>autoredirect</code> is set to <code>true</code>, default: <code>/auth/token/</code>.</td>
</tr>
<tr>
<td><code>signingalgorithms</code></td>
<td>no</td>
<td>A list of token signing algorithms to use for verifying token signatures. If left empty the default list of signing algorithms is used. Please see below for allowed values and default.</td>
</tr>
<tr>
<td><code>jwks</code></td>
<td>no</td>
<td>The absolute path to the JSON Web Key Set (JWKS) file. The JWKS file contains the trusted keys used to verify the signature of authentication tokens.</td>
</tr>
</tbody>
</table> </div>
<p>Available <code>signingalgorithms</code>:</p>
<ul>
<li>EdDSA</li>
<li>HS256</li>
<li>HS384</li>
<li>HS512</li>
<li>RS256</li>
<li>RS384</li>
<li>RS512</li>
<li>ES256</li>
<li>ES384</li>
<li>ES512</li>
<li>PS256</li>
<li>PS384</li>
<li>PS512</li>
</ul>
<p>Default <code>signingalgorithms</code>:</p>
<ul>
<li>EdDSA</li>
<li>HS256</li>
<li>HS384</li>
<li>HS512</li>
<li>RS256</li>
<li>RS384</li>
<li>RS512</li>
<li>ES256</li>
<li>ES384</li>
<li>ES512</li>
<li>PS256</li>
<li>PS384</li>
<li>PS512</li>
</ul>
<p>For more information about Token based authentication configuration, see the
<a href="../../spec/auth/token/index.html">specification</a>.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="htpasswd"
    >
        <code>htpasswd</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#htpasswd" class="gdoc-page__anchor clip flex align-center" title="Anchor to: htpasswd" aria-label="Anchor to: htpasswd" href="index.html#htpasswd">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <em>htpasswd</em> authentication backed allows you to configure basic
authentication using an
<a href="https://httpd.apache.org/docs/2.4/programs/htpasswd.html" target="_blank">Apache htpasswd file</a>.
The only supported password format is
<a href="https://en.wikipedia.org/wiki/Bcrypt" target="_blank"><code>bcrypt</code></a>. Entries with other hash types
are ignored. The <code>htpasswd</code> file is loaded once, at startup. If the file is
invalid, the registry will display an error and will not start.</p>
<blockquote>
<p><strong>Warning</strong>: If the <code>htpasswd</code> file is missing, the file will be created and provisioned with a default user and automatically generated password.
The password will be printed to stdout.</p>
</blockquote>
<blockquote>
<p><strong>Warning</strong>: Only use the <code>htpasswd</code> authentication scheme with TLS
configured, since basic authentication sends passwords as part of the HTTP
header.</p>
</blockquote>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>realm</code></td>
<td>yes</td>
<td>The realm in which the registry server authenticates.</td>
</tr>
<tr>
<td><code>path</code></td>
<td>yes</td>
<td>The path to the <code>htpasswd</code> file to load at startup.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="middleware"
    >
        <code>middleware</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#middleware" class="gdoc-page__anchor clip flex align-center" title="Anchor to: middleware" aria-label="Anchor to: middleware" href="index.html#middleware">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>middleware</code> structure is <strong>optional</strong>. Use this option to inject middleware at
named hook points. Each middleware must implement the same interface as the
object it is wrapping. For instance, a registry middleware must implement the
<code>distribution.Namespace</code> interface, while a repository middleware must implement
<code>distribution.Repository</code>, and a storage middleware must implement
<code>driver.StorageDriver</code>.</p>
<p>This is an example configuration of the <code>cloudfront</code>  middleware, a storage
middleware:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">middleware</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">registry</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ARegistryMiddleware</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">foo</span><span class="p">:</span><span class="w"> </span><span class="l">bar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">repository</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ARepositoryMiddleware</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">foo</span><span class="p">:</span><span class="w"> </span><span class="l">bar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">storage</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">cloudfront</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">baseurl</span><span class="p">:</span><span class="w"> </span><span class="l">https://my.cloudfronted.domain.com/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">privatekey</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">keypairid</span><span class="p">:</span><span class="w"> </span><span class="l">cloudfrontkeypairid</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l">3000s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">ipfilteredby</span><span class="p">:</span><span class="w"> </span><span class="l">awsregion</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">awsregion</span><span class="p">:</span><span class="w"> </span><span class="l">us-east-1, use-east-2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">updatefrequency</span><span class="p">:</span><span class="w"> </span><span class="l">12h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">iprangesurl</span><span class="p">:</span><span class="w"> </span><span class="l">https://ip-ranges.amazonaws.com/ip-ranges.json</span><span class="w">
</span></span></span></code></pre></div><p>Each middleware entry has <code>name</code> and <code>options</code> entries. The <code>name</code> must
correspond to the name under which the middleware registers itself. The
<code>options</code> field is a map that details custom configuration required to
initialize the middleware. It is treated as a <code>map[string]interface{}</code>. As such,
it supports any interesting structures desired, leaving it up to the middleware
initialization function to best determine how to handle the specific
interpretation of the options.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="cloudfront"
    >
        <code>cloudfront</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#cloudfront" class="gdoc-page__anchor clip flex align-center" title="Anchor to: cloudfront" aria-label="Anchor to: cloudfront" href="index.html#cloudfront">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>baseurl</code></td>
<td>yes</td>
<td>The <code>SCHEME://HOST[/PATH]</code> at which Cloudfront is served.</td>
</tr>
<tr>
<td><code>privatekey</code></td>
<td>yes</td>
<td>The private key for Cloudfront, provided by AWS.</td>
</tr>
<tr>
<td><code>keypairid</code></td>
<td>yes</td>
<td>The key pair ID provided by AWS.</td>
</tr>
<tr>
<td><code>duration</code></td>
<td>no</td>
<td>An integer and unit for the duration of the Cloudfront session. Valid time units are <code>ns</code>, <code>us</code> (or <code>µs</code>), <code>ms</code>, <code>s</code>, <code>m</code>, or <code>h</code>. For example, <code>3000s</code> is valid, but <code>3000 s</code> is not. If you do not specify a <code>duration</code> or you specify an integer without a time unit, the duration defaults to <code>20m</code> (20 minutes).</td>
</tr>
<tr>
<td><code>ipfilteredby</code></td>
<td>no</td>
<td>A string with the following value <code>none</code>, <code>aws</code> or <code>awsregion</code>.</td>
</tr>
<tr>
<td><code>awsregion</code></td>
<td>no</td>
<td>A comma separated string of AWS regions, only available when <code>ipfilteredby</code> is <code>awsregion</code>. For example, <code>us-east-1, us-west-2</code></td>
</tr>
<tr>
<td><code>updatefrequency</code></td>
<td>no</td>
<td>The frequency to update AWS IP regions, default: <code>12h</code></td>
</tr>
<tr>
<td><code>iprangesurl</code></td>
<td>no</td>
<td>The URL contains the AWS IP ranges information, default: <code>https://ip-ranges.amazonaws.com/ip-ranges.json</code></td>
</tr>
</tbody>
</table> </div>
<p>Value of <code>ipfilteredby</code> can be:</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>none</code></td>
<td>default, do not filter by IP</td>
</tr>
<tr>
<td><code>aws</code></td>
<td>IP from AWS goes to S3 directly</td>
</tr>
<tr>
<td><code>awsregion</code></td>
<td>IP from certain AWS regions goes to S3 directly, use together with <code>awsregion</code>.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="redirect-1"
    >
        <code>redirect</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#redirect-1" class="gdoc-page__anchor clip flex align-center" title="Anchor to: redirect" aria-label="Anchor to: redirect" href="index.html#redirect-1">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>You can use the <code>redirect</code> storage middleware to specify a custom URL to a
location of a proxy for the layer stored by the S3 storage driver.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>baseurl</code></td>
<td>yes</td>
<td><code>SCHEME://HOST</code> at which layers are served. Can also contain port. For example, <code>https://example.com:5443</code>.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="http"
    >
        <code>http</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#http" class="gdoc-page__anchor clip flex align-center" title="Anchor to: http" aria-label="Anchor to: http" href="index.html#http">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">http</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="l">localhost:5000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">net</span><span class="p">:</span><span class="w"> </span><span class="l">tcp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l">/my/nested/registry/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l">https://myregistryaddress.org:5000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="l">asecretforlocaldevelopment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">relativeurls</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">draintimeout</span><span class="p">:</span><span class="w"> </span><span class="l">60s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">certificate</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/x509/public</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/x509/private</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">clientcas</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/path/to/ca.pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/path/to/another/ca.pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">minimumtls</span><span class="p">:</span><span class="w"> </span><span class="l">tls1.2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ciphersuites</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">letsencrypt</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">cachefile</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/cache-file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">email</span><span class="p">:</span><span class="w"> </span><span class="l">emailused@letsencrypt.com</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">myregistryaddress.org]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">directoryurl</span><span class="p">:</span><span class="w"> </span><span class="l">https://acme-v02.api.letsencrypt.org/directory</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">debug</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="l">localhost:5001</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">headers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">X-Content-Type-Options</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">nosniff]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">http2</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">h2c</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span></code></pre></div><p>The <code>http</code> option details the configuration for the HTTP server that hosts the
registry.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>addr</code></td>
<td>no</td>
<td>The address for which the server should accept connections. The form depends on a network type (see the <code>net</code> option). Use <code>HOST:PORT</code> for TCP and <code>FILE</code> for a UNIX socket. The <code>addr</code> field is only optional if socket-activation is used (in which case <code>addr</code> and <code>net</code> are ignored regardless of if they are specified).</td>
</tr>
<tr>
<td><code>net</code></td>
<td>no</td>
<td>The network used to create a listening socket. Known networks are <code>unix</code> and <code>tcp</code>.</td>
</tr>
<tr>
<td><code>prefix</code></td>
<td>no</td>
<td>If the server does not run at the root path, set this to the value of the prefix. The root path is the section before <code>v2</code>. It requires both preceding and trailing slashes, such as in the example <code>/path/</code>.</td>
</tr>
<tr>
<td><code>host</code></td>
<td>no</td>
<td>A fully-qualified URL for an externally-reachable address for the registry. If present, it is used when creating generated URLs. Otherwise, these URLs are derived from client requests.</td>
</tr>
<tr>
<td><code>secret</code></td>
<td>no</td>
<td>A random piece of data used to sign state that may be stored with the client to protect against tampering. For production environments you should generate a random piece of data using a cryptographically secure random generator. If you omit the secret, the registry will automatically generate a secret when it starts. <strong>If you are building a cluster of registries behind a load balancer, you MUST ensure the secret is the same for all registries.</strong></td>
</tr>
<tr>
<td><code>relativeurls</code></td>
<td>no</td>
<td>If <code>true</code>,  the registry returns relative URLs in Location headers. The client is responsible for resolving the correct URL. <strong>This option is not compatible with Docker 1.7 and earlier.</strong></td>
</tr>
<tr>
<td><code>draintimeout</code></td>
<td>no</td>
<td>Amount of time to wait for HTTP connections to drain before shutting down after registry receives SIGTERM signal</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="tls"
    >
        <code>tls</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#tls" class="gdoc-page__anchor clip flex align-center" title="Anchor to: tls" aria-label="Anchor to: tls" href="index.html#tls">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>tls</code> structure within <code>http</code> is <strong>optional</strong>. Use this to configure TLS
for the server. If you already have a web server running on
the same host as the registry, you may prefer to configure TLS on that web server
and proxy connections to the registry server.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>certificate</code></td>
<td>yes</td>
<td>Absolute path to the x509 certificate file.</td>
</tr>
<tr>
<td><code>key</code></td>
<td>yes</td>
<td>Absolute path to the x509 private key file.</td>
</tr>
<tr>
<td><code>clientcas</code></td>
<td>no</td>
<td>An array of absolute paths to x509 CA files.</td>
</tr>
<tr>
<td><code>minimumtls</code></td>
<td>no</td>
<td>Minimum TLS version allowed (tls1.0, tls1.1, tls1.2, tls1.3). Defaults to tls1.2</td>
</tr>
<tr>
<td><code>ciphersuites</code></td>
<td>no</td>
<td>Cipher suites allowed. Please see below for allowed values and default.</td>
</tr>
</tbody>
</table> </div>
<p>Available cipher suites:</p>
<ul>
<li>TLS_RSA_WITH_RC4_128_SHA</li>
<li>TLS_RSA_WITH_3DES_EDE_CBC_SHA</li>
<li>TLS_RSA_WITH_AES_128_CBC_SHA</li>
<li>TLS_RSA_WITH_AES_256_CBC_SHA</li>
<li>TLS_RSA_WITH_AES_128_CBC_SHA256</li>
<li>TLS_RSA_WITH_AES_128_GCM_SHA256</li>
<li>TLS_RSA_WITH_AES_256_GCM_SHA384</li>
<li>TLS_ECDHE_ECDSA_WITH_RC4_128_SHA</li>
<li>TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</li>
<li>TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</li>
<li>TLS_ECDHE_RSA_WITH_RC4_128_SHA</li>
<li>TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA</li>
<li>TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</li>
<li>TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</li>
<li>TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</li>
<li>TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</li>
<li>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</li>
<li>TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</li>
<li>TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</li>
<li>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</li>
<li>TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</li>
<li>TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</li>
<li>TLS_AES_128_GCM_SHA256</li>
<li>TLS_AES_256_GCM_SHA384</li>
<li>TLS_CHACHA20_POLY1305_SHA256</li>
</ul>
<p>Default cipher suites:</p>
<ul>
<li>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</li>
<li>TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</li>
<li>TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</li>
<li>TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</li>
<li>TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</li>
<li>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</li>
<li>TLS_AES_128_GCM_SHA256</li>
<li>TLS_CHACHA20_POLY1305_SHA256</li>
<li>TLS_AES_256_GCM_SHA384</li>
</ul>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="letsencrypt"
    >
        <code>letsencrypt</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#letsencrypt" class="gdoc-page__anchor clip flex align-center" title="Anchor to: letsencrypt" aria-label="Anchor to: letsencrypt" href="index.html#letsencrypt">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>letsencrypt</code> structure within <code>tls</code> is <strong>optional</strong>. Use this to configure
TLS certificates provided by
<a href="https://letsencrypt.org/how-it-works/" target="_blank">Let&rsquo;s Encrypt</a>.</p>
<blockquote>
<p><strong>NOTE</strong>: When using Let&rsquo;s Encrypt, ensure that the outward-facing address is
accessible on port <code>443</code>. The registry defaults to listening on port <code>5000</code>.
If you run the registry as a container, consider adding the flag <code>-p 443:5000</code>
to the <code>docker run</code> command or using a similar setting in a cloud
configuration. You should also set the <code>hosts</code> option to the list of hostnames
that are valid for this registry to avoid trying to get certificates for random
hostnames due to malicious clients connecting with bogus SNI hostnames. Please
ensure that you have the <code>ca-certificates</code> package installed in order to verify
letsencrypt certificates.</p>
</blockquote>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cachefile</code></td>
<td>yes</td>
<td>Absolute path to a file where the Let&rsquo;s Encrypt agent can cache data.</td>
</tr>
<tr>
<td><code>email</code></td>
<td>yes</td>
<td>The email address used to register with Let&rsquo;s Encrypt.</td>
</tr>
<tr>
<td><code>hosts</code></td>
<td>no</td>
<td>The hostnames allowed for Let&rsquo;s Encrypt certificates.</td>
</tr>
<tr>
<td><code>directoryurl</code></td>
<td>no</td>
<td>The url to use for the ACME server.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="debug"
    >
        <code>debug</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#debug" class="gdoc-page__anchor clip flex align-center" title="Anchor to: debug" aria-label="Anchor to: debug" href="index.html#debug">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>debug</code> option is <strong>optional</strong> . Use it to configure a debug server that
can be helpful in diagnosing problems. The debug endpoint can be used for
monitoring registry metrics and health, as well as profiling. Sensitive
information may be available via the debug endpoint. Please be certain that
access to the debug endpoint is locked down in a production environment.
The debug endpoint should not be exposed publicly to the internet.
Instead, keep the debug endpoint private or enforce authentication for it.</p>
<p>The <code>debug</code> section takes a single required <code>addr</code> parameter, which specifies
the <code>HOST:PORT</code> on which the debug server should accept connections.</p>
<p>If configured, <code>notification</code>, <code>redis</code>, and <code>proxy</code> statistics are exposed
at <code>/debug/vars</code> in JSON format.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="prometheus"
    >
        <code>prometheus</code>
    </h4>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#prometheus" class="gdoc-page__anchor clip flex align-center" title="Anchor to: prometheus" aria-label="Anchor to: prometheus" href="index.html#prometheus">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">prometheus</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/metrics</span><span class="w">
</span></span></span></code></pre></div><p>The <code>prometheus</code> option defines whether the prometheus metrics are enabled, as well
as the path to access the metrics.</p>
<p>The prometheus metrics cover <code>storage</code>, <code>notification</code> and <code>proxy</code> statistics.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>no</td>
<td>Set <code>true</code> to enable the prometheus server</td>
</tr>
<tr>
<td><code>path</code></td>
<td>no</td>
<td>The path to access the metrics, <code>/metrics</code> by default</td>
</tr>
</tbody>
</table> </div>
<p>The url to access the metrics is <code>HOST:PORT/path</code>, where <code>HOST:PORT</code> is defined
in <code>addr</code> under <code>debug</code>.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="headers"
    >
        <code>headers</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#headers" class="gdoc-page__anchor clip flex align-center" title="Anchor to: headers" aria-label="Anchor to: headers" href="index.html#headers">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>headers</code> option is <strong>optional</strong> . Use it to specify headers that the HTTP
server should include in responses. This can be used for security headers such
as <code>Strict-Transport-Security</code>.</p>
<p>The <code>headers</code> option should contain an option for each header to include, where
the parameter name is the header&rsquo;s name, and the parameter value a list of the
header&rsquo;s payload values.</p>
<p>Including <code>X-Content-Type-Options: [nosniff]</code> is recommended, so that browsers
will not interpret content as HTML if they are directed to load a page from the
registry. This header is included in the example configuration file.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="http2"
    >
        <code>http2</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#http2" class="gdoc-page__anchor clip flex align-center" title="Anchor to: http2" aria-label="Anchor to: http2" href="index.html#http2">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>http2</code> structure within <code>http</code> is <strong>optional</strong>. Use this to control HTTP/2 over TLS
settings for the registry.
If <code>tls</code> is not configured this option is ignored. To enable HTTP/2 over non TLS connections use <code>h2c</code> instead.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>disabled</code></td>
<td>no</td>
<td>If <code>true</code>, then <code>http2</code> support is disabled.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="h2c"
    >
        <code>h2c</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#h2c" class="gdoc-page__anchor clip flex align-center" title="Anchor to: h2c" aria-label="Anchor to: h2c" href="index.html#h2c">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>h2c</code> structure within <code>http</code> is <strong>optional</strong>. Use this to control H2C (HTTP/2 Cleartext)
settings for the registry.
Useful when deploying the registry behind a load balancer (e.g. Google Cloud Run)</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>no</td>
<td>If <code>true</code>, then <code>h2c</code> support is enabled.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="notifications"
    >
        <code>notifications</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#notifications" class="gdoc-page__anchor clip flex align-center" title="Anchor to: notifications" aria-label="Anchor to: notifications" href="index.html#notifications">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">notifications</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">events</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">includereferences</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">endpoints</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">alistener</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">https://my.listener.com/event</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">headers</span><span class="p">:</span><span class="w"> </span><span class="l">&lt;http.Header&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l">1s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">backoff</span><span class="p">:</span><span class="w"> </span><span class="l">1s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">ignoredmediatypes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">application/octet-stream</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">ignore</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">mediatypes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span>- <span class="l">application/octet-stream</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">actions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span>- <span class="l">pull</span><span class="w">
</span></span></span></code></pre></div><p>The notifications option is <strong>optional</strong> and currently may contain a single
option, <code>endpoints</code>.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="endpoints"
    >
        <code>endpoints</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#endpoints" class="gdoc-page__anchor clip flex align-center" title="Anchor to: endpoints" aria-label="Anchor to: endpoints" href="index.html#endpoints">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>endpoints</code> structure contains a list of named services (URLs) that can
accept event notifications.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>yes</td>
<td>A human-readable name for the service.</td>
</tr>
<tr>
<td><code>disabled</code></td>
<td>no</td>
<td>If <code>true</code>, notifications are disabled for the service.</td>
</tr>
<tr>
<td><code>url</code></td>
<td>yes</td>
<td>The URL to which events should be published.</td>
</tr>
<tr>
<td><code>headers</code></td>
<td>yes</td>
<td>A list of static headers to add to each request. Each header&rsquo;s name is a key beneath <code>headers</code>, and each value is a list of payloads for that header name. Values must always be lists.</td>
</tr>
<tr>
<td><code>timeout</code></td>
<td>yes</td>
<td>A value for the HTTP timeout. A positive integer and an optional suffix indicating the unit of time, which may be <code>ns</code>, <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code>, or <code>h</code>. If you omit the unit of time, <code>ns</code> is used.</td>
</tr>
<tr>
<td><code>threshold</code></td>
<td>yes</td>
<td>An integer specifying how long to wait before backing off a failure.</td>
</tr>
<tr>
<td><code>backoff</code></td>
<td>yes</td>
<td>How long the system backs off before retrying after a failure. A positive integer and an optional suffix indicating the unit of time, which may be <code>ns</code>, <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code>, or <code>h</code>. If you omit the unit of time, <code>ns</code> is used.</td>
</tr>
<tr>
<td><code>ignoredmediatypes</code></td>
<td>no</td>
<td>A list of target media types to ignore. Events with these target media types are not published to the endpoint.</td>
</tr>
<tr>
<td><code>ignore</code></td>
<td>no</td>
<td>Events with these mediatypes or actions are not published to the endpoint.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="ignore"
    >
        <code>ignore</code>
    </h4>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#ignore" class="gdoc-page__anchor clip flex align-center" title="Anchor to: ignore" aria-label="Anchor to: ignore" href="index.html#ignore">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mediatypes</code></td>
<td>no</td>
<td>A list of target media types to ignore. Events with these target media types are not published to the endpoint.</td>
</tr>
<tr>
<td><code>actions</code></td>
<td>no</td>
<td>A list of actions to ignore. Events with these actions are not published to the endpoint.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="events"
    >
        <code>events</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#events" class="gdoc-page__anchor clip flex align-center" title="Anchor to: events" aria-label="Anchor to: events" href="index.html#events">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>events</code> structure configures the information provided in event notifications.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>includereferences</code></td>
<td>no</td>
<td>If <code>true</code>, include reference information in manifest events.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="redis"
    >
        <code>redis</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#redis" class="gdoc-page__anchor clip flex align-center" title="Anchor to: redis" aria-label="Anchor to: redis" href="index.html#redis">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Declare parameters for constructing the <code>redis</code> connections. Registry instances
may use the Redis instance for several applications. Currently, it caches
information about immutable blobs. Most of the <code>redis</code> options control
how the registry connects to the <code>redis</code> instance.</p>
<p>You should configure Redis with the <strong>allkeys-lru</strong> eviction policy, because the
registry does not set an expiration value on keys.</p>
<p>Under the hood distribution uses <a href="https://github.com/redis/go-redis" target="_blank"><code>go-redis</code></a> Go module for
Redis connectivity and its <a href="https://pkg.go.dev/github.com/redis/go-redis/v9#UniversalOptions" target="_blank"><code>UniversalOptions</code></a>
struct.</p>
<p>You can optionally specify TLS configuration on top of the <code>UniversalOptions</code> settings.</p>
<p>Use these settings to configure Redis TLS:</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>certificate</code></td>
<td>yes</td>
<td>Absolute path to the x509 certificate file.</td>
</tr>
<tr>
<td><code>key</code></td>
<td>yes</td>
<td>Absolute path to the x509 private key file.</td>
</tr>
<tr>
<td><code>clientcas</code></td>
<td>no</td>
<td>An array of absolute paths to x509 CA files.</td>
</tr>
</tbody>
</table> </div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">redis</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">certificate</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/cert.crt</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/key.pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">clientcas</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/path/to/ca.pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">addrs</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">localhost:6379]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l">asecret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">db</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">dialtimeout</span><span class="p">:</span><span class="w"> </span><span class="l">10ms</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">readtimeout</span><span class="p">:</span><span class="w"> </span><span class="l">10ms</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">writetimeout</span><span class="p">:</span><span class="w"> </span><span class="l">10ms</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">maxidleconns</span><span class="p">:</span><span class="w"> </span><span class="m">16</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">poolsize</span><span class="p">:</span><span class="w"> </span><span class="m">64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">connmaxidletime</span><span class="p">:</span><span class="w"> </span><span class="l">300s</span><span class="w">
</span></span></span></code></pre></div><div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="health"
    >
        <code>health</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#health" class="gdoc-page__anchor clip flex align-center" title="Anchor to: health" aria-label="Anchor to: health" href="index.html#health">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">health</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">storagedriver</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l">10s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">file</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/checked/file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l">10s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">http</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="l">http://server.to.check/must/return/200</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">headers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Authorization</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">statuscode</span><span class="p">:</span><span class="w"> </span><span class="m">200</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l">3s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l">10s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tcp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="l">redis-server.domain.com:6379</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l">3s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l">10s</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span></code></pre></div><p>The health option is <strong>optional</strong>, and contains preferences for a periodic
health check on the storage driver&rsquo;s backend storage, as well as optional
periodic checks on local files, HTTP URIs, and/or TCP servers. The results of
the health checks are available at the <code>/debug/health</code> endpoint on the debug
HTTP server if the debug HTTP server is enabled (see http section).</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="storagedriver"
    >
        <code>storagedriver</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#storagedriver" class="gdoc-page__anchor clip flex align-center" title="Anchor to: storagedriver" aria-label="Anchor to: storagedriver" href="index.html#storagedriver">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>storagedriver</code> structure contains options for a health check on the
configured storage driver&rsquo;s backend storage. The health check is only active
when <code>enabled</code> is set to <code>true</code>.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>yes</td>
<td>Set to <code>true</code> to enable storage driver health checks or <code>false</code> to disable them.</td>
</tr>
<tr>
<td><code>interval</code></td>
<td>no</td>
<td>How long to wait between repetitions of the storage driver health check. A positive integer and an optional suffix indicating the unit of time. The suffix is one of <code>ns</code>, <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code>, or <code>h</code>. Defaults to <code>10s</code> if the value is omitted. If you specify a value but omit the suffix, the value is interpreted as a number of nanoseconds.</td>
</tr>
<tr>
<td><code>threshold</code></td>
<td>no</td>
<td>A positive integer which represents the number of times the check must fail before the state is marked as unhealthy. If not specified, a single failure marks the state as unhealthy.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="file"
    >
        <code>file</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#file" class="gdoc-page__anchor clip flex align-center" title="Anchor to: file" aria-label="Anchor to: file" href="index.html#file">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>file</code> structure includes a list of paths to be periodically checked for the<br>
existence of a file. If a file exists at the given path, the health check will
fail. You can use this mechanism to bring a registry out of rotation by creating
a file.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>file</code></td>
<td>yes</td>
<td>The path to check for existence of a file.</td>
</tr>
<tr>
<td><code>interval</code></td>
<td>no</td>
<td>How long to wait before repeating the check. A positive integer and an optional suffix indicating the unit of time. The suffix is one of <code>ns</code>, <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code>, or <code>h</code>. Defaults to <code>10s</code> if the value is omitted. If you specify a value but omit the suffix, the value is interpreted as a number of nanoseconds.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="http-1"
    >
        <code>http</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#http-1" class="gdoc-page__anchor clip flex align-center" title="Anchor to: http" aria-label="Anchor to: http" href="index.html#http-1">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>http</code> structure includes a list of HTTP URIs to periodically check with
<code>HEAD</code> requests. If a <code>HEAD</code> request does not complete or returns an unexpected
status code, the health check will fail.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>uri</code></td>
<td>yes</td>
<td>The URI to check.</td>
</tr>
<tr>
<td><code>headers</code></td>
<td>no</td>
<td>Static headers to add to each request. Each header&rsquo;s name is a key beneath <code>headers</code>, and each value is a list of payloads for that header name. Values must always be lists.</td>
</tr>
<tr>
<td><code>statuscode</code></td>
<td>no</td>
<td>The expected status code from the HTTP URI. Defaults to <code>200</code>.</td>
</tr>
<tr>
<td><code>timeout</code></td>
<td>no</td>
<td>How long to wait before timing out the HTTP request. A positive integer and an optional suffix indicating the unit of time. The suffix is one of <code>ns</code>, <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code>, or <code>h</code>. If you specify a value but omit the suffix, the value is interpreted as a number of nanoseconds.</td>
</tr>
<tr>
<td><code>interval</code></td>
<td>no</td>
<td>How long to wait before repeating the check. A positive integer and an optional suffix indicating the unit of time. The suffix is one of <code>ns</code>, <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code>, or <code>h</code>. Defaults to <code>10s</code> if the value is omitted. If you specify a value but omit the suffix, the value is interpreted as a number of nanoseconds.</td>
</tr>
<tr>
<td><code>threshold</code></td>
<td>no</td>
<td>The number of times the check must fail before the state is marked as unhealthy. If this field is not specified, a single failure marks the state as unhealthy.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="tcp"
    >
        <code>tcp</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#tcp" class="gdoc-page__anchor clip flex align-center" title="Anchor to: tcp" aria-label="Anchor to: tcp" href="index.html#tcp">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>tcp</code> structure includes a list of TCP addresses to periodically check using
TCP connection attempts. Addresses must include port numbers. If a connection
attempt fails, the health check will fail.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>addr</code></td>
<td>yes</td>
<td>The TCP address and port to connect to.</td>
</tr>
<tr>
<td><code>timeout</code></td>
<td>no</td>
<td>How long to wait before timing out the TCP connection. A positive integer and an optional suffix indicating the unit of time. The suffix is one of <code>ns</code>, <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code>, or <code>h</code>. If you specify a value but omit the suffix, the value is interpreted as a number of nanoseconds.</td>
</tr>
<tr>
<td><code>interval</code></td>
<td>no</td>
<td>How long to wait between repetitions of the check. A positive integer and an optional suffix indicating the unit of time. The suffix is one of <code>ns</code>, <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code>, or <code>h</code>. Defaults to <code>10s</code> if the value is omitted. If you specify a value but omit the suffix, the value is interpreted as a number of nanoseconds.</td>
</tr>
<tr>
<td><code>threshold</code></td>
<td>no</td>
<td>The number of times the check must fail before the state is marked as unhealthy. If this field is not specified, a single failure marks the state as unhealthy.</td>
</tr>
</tbody>
</table> </div>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="proxy"
    >
        <code>proxy</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#proxy" class="gdoc-page__anchor clip flex align-center" title="Anchor to: proxy" aria-label="Anchor to: proxy" href="index.html#proxy">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">proxy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remoteurl</span><span class="p">:</span><span class="w"> </span><span class="l">https://registry-1.docker.io</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">username]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">password]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l">168h</span><span class="w">
</span></span></span></code></pre></div><p>The <code>proxy</code> structure allows a registry to be configured as a pull-through cache
to Docker Hub. See
<a href="../../recipes/mirror/index.html">mirror</a>
for more information. Pushing to a registry configured as a pull-through cache
is unsupported.</p>
<div class="table-wrap"> <table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>remoteurl</code></td>
<td>yes</td>
<td>The URL for the repository on Docker Hub.</td>
</tr>
<tr>
<td><code>username</code></td>
<td>no</td>
<td>The username registered with Docker Hub which has access to the repository.</td>
</tr>
<tr>
<td><code>password</code></td>
<td>no</td>
<td>The password used to authenticate to Docker Hub using the username specified in <code>username</code>.</td>
</tr>
<tr>
<td><code>ttl</code></td>
<td>no</td>
<td>Expire proxy cache configured in &ldquo;storage&rdquo; after this time. Cache 168h(7 days) by default, set to 0 to disable cache expiration, The suffix is one of <code>ns</code>, <code>us</code>, <code>ms</code>, <code>s</code>, <code>m</code>, or <code>h</code>. If you specify a value but omit the suffix, the value is interpreted as a number of nanoseconds.</td>
</tr>
</tbody>
</table> </div>
<p>To enable pulling private repositories (e.g. <code>batman/robin</code>) specify the
username (such as <code>batman</code>) and the password for that username.</p>
<blockquote>
<p><strong>Note</strong>: These private repositories are stored in the proxy cache&rsquo;s storage.
Take appropriate measures to protect access to the proxy cache.</p>
</blockquote>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="validation"
    >
        <code>validation</code>
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#validation" class="gdoc-page__anchor clip flex align-center" title="Anchor to: validation" aria-label="Anchor to: validation" href="index.html#validation">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">validation</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span></code></pre></div><p>Use these settings to configure what validation the registry performs on content.</p>
<p>Validation is performed when content is uploaded to the registry. Changing these
settings will not validate content that has already been accepting into the registry.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="disabled"
    >
        <code>disabled</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#disabled" class="gdoc-page__anchor clip flex align-center" title="Anchor to: disabled" aria-label="Anchor to: disabled" href="index.html#disabled">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>The <code>disabled</code> flag disables the other options in the <code>validation</code>
section. They are enabled by default. This option deprecates the <code>enabled</code> flag.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h3 id="manifests"
    >
        <code>manifests</code>
    </h3>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#manifests" class="gdoc-page__anchor clip flex align-center" title="Anchor to: manifests" aria-label="Anchor to: manifests" href="index.html#manifests">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Use the <code>manifests</code> subsection to configure validation of manifests. If
<code>disabled</code> is <code>false</code>, the validation allows nothing.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="urls"
    >
        <code>urls</code>
    </h4>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#urls" class="gdoc-page__anchor clip flex align-center" title="Anchor to: urls" aria-label="Anchor to: urls" href="index.html#urls">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">validation</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">manifests</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">urls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">allow</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">^https?://([^/]+\.)*example\.com/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">deny</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">^https?://www\.example\.com/</span><span class="w">
</span></span></span></code></pre></div><p>The <code>allow</code> and <code>deny</code> options are each a list of
<a href="https://pkg.go.dev/regexp/syntax" target="_blank">regular expressions</a> that restrict the URLs in
pushed manifests.</p>
<p>If <code>allow</code> is unset, pushing a manifest containing URLs fails.</p>
<p>If <code>allow</code> is set, pushing a manifest succeeds only if all URLs match
one of the <code>allow</code> regular expressions <strong>and</strong> one of the following holds:</p>
<ol>
<li><code>deny</code> is unset.</li>
<li><code>deny</code> is set but no URLs within the manifest match any of the <code>deny</code> regular
expressions.</li>
</ol>
<div class="flex align-center gdoc-page__anchorwrap">
    <h4 id="indexes"
    >
        <code>indexes</code>
    </h4>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#indexes" class="gdoc-page__anchor clip flex align-center" title="Anchor to: indexes" aria-label="Anchor to: indexes" href="index.html#indexes">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>By default the registry will validate that all platform images exist when an image
index is uploaded to the registry. Disabling this validatation is experimental
because other tooling that uses the registry may expect the image index to be complete.</p>
<p>validation:
manifests:
indexes:
platforms: [all|none|list]
platformlist:
- os: linux
architecture: amd64</p>
<p>Use these settings to configure what validation the registry performs on image
index manifests uploaded to the registry.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h5 id="platforms"
    >
        <code>platforms</code>
    </h5>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#platforms" class="gdoc-page__anchor clip flex align-center" title="Anchor to: platforms" aria-label="Anchor to: platforms" href="index.html#platforms">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>Set <code>platformexist</code> to <code>all</code> (the default) to validate all platform images exist.
The registry will validate that the images referenced by the index exist in the
registry before accepting the image index.</p>
<p>Set <code>platforms</code> to <code>none</code> to disable all validation that images exist when an
image index manifest is uploaded. This allows image lists to be uploaded to the
registry without their associated images. This setting is experimental because
other tooling that uses the registry may expect the image index to be complete.</p>
<p>Set <code>platforms</code> to <code>list</code> to selectively validate the existence of platforms
within image index manifests. This setting is experimental because other tooling
that uses the registry may expect the image index to be complete.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h5 id="platformlist"
    >
        <code>platformlist</code>
    </h5>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#platformlist" class="gdoc-page__anchor clip flex align-center" title="Anchor to: platformlist" aria-label="Anchor to: platformlist" href="index.html#platformlist">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>When <code>platforms</code> is set to <code>list</code>, set <code>platformlist</code> to an array of
platforms to validate. If a platform is included in this the array and in the images
contained within an index, the registry will validate that the platform specific image
exists in the registry before accepting the index. The registry will not validate the
existence of platform specific images in the index that do not appear in the
<code>platformlist</code> array.</p>
<p>This parameter does not validate that the configured platforms are included in every
index. If an image index does not include one of the platform specific images configured
in the <code>platformlist</code> array, it may still be accepted by the registry.</p>
<p>Each platform is a map with two keys, <code>os</code> and <code>architecture</code>, as defined in the
<a href="https://github.com/opencontainers/image-spec/blob/main/image-index.md#image-index-property-descriptions" target="_blank">OCI Image Index specification</a>.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="example-development-configuration"
    >
        Example: Development configuration
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#example-development-configuration" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Example: Development configuration" aria-label="Anchor to: Example: Development configuration" href="index.html#example-development-configuration">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>You can use this simple example for local development:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">0.1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">log</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l">debug</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">storage</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">filesystem</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">rootdirectory</span><span class="p">:</span><span class="w"> </span><span class="l">/var/lib/registry</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">http</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="l">localhost:5000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">secret</span><span class="p">:</span><span class="w"> </span><span class="l">asecretforlocaldevelopment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">debug</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="l">localhost:5001</span><span class="w">
</span></span></span></code></pre></div><p>This example configures the registry instance to run on port <code>5000</code>, binding to
<code>localhost</code>, with the <code>debug</code> server enabled. Registry data is stored in the
<code>/var/lib/registry</code> directory. Logging is set to <code>debug</code> mode, which is the most
verbose.</p>
<p>See
<a href="https://github.com/distribution/distribution/blob/master/cmd/registry/config-example.yml" target="_blank">config-example.yml</a>
for another simple configuration. Both examples are generally useful for local
development.</p>
<div class="flex align-center gdoc-page__anchorwrap">
    <h2 id="example-middleware-configuration"
    >
        Example: Middleware configuration
    </h2>
    <a data-clipboard-text="https://distribution.github.io/distribution/about/configuration/#example-middleware-configuration" class="gdoc-page__anchor clip flex align-center" title="Anchor to: Example: Middleware configuration" aria-label="Anchor to: Example: Middleware configuration" href="index.html#example-middleware-configuration">
        <svg class="gdoc-icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
    </a>
</div>
<p>This example configures <a href="https://aws.amazon.com/cloudfront/" target="_blank">Amazon Cloudfront</a>
as the storage middleware in a registry. Middleware allows the registry to serve
layers via a content delivery network (CDN). This reduces requests to the
storage layer.</p>
<p>Cloudfront requires the S3 storage driver.</p>
<p>This is the configuration expressed in YAML:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">middleware</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">storage</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">cloudfront</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">disabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">options</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">baseurl</span><span class="p">:</span><span class="w"> </span><span class="l">http://d111111abcdef8.cloudfront.net</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">privatekey</span><span class="p">:</span><span class="w"> </span><span class="l">/path/to/asecret.pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">keypairid</span><span class="p">:</span><span class="w"> </span><span class="l">asecret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l">60s</span><span class="w">
</span></span></span></code></pre></div><p>See the configuration reference for <a href="index.html#cloudfront">Cloudfront</a> for more
information about configuration options.</p>





<blockquote class="gdoc-hint note">
  <div class="gdoc-hint__title flex align-center"><i class="fa note" title="Note"></i></div>
  <div class="gdoc-hint__text">Cloudfront keys exist separately from other AWS keys. See
<a href="https://docs.aws.amazon.com/general/latest/gr/aws-security-credentials.html" target="_blank">the documentation on AWS credentials</a>
for more information.</div>
</blockquote>


  </article>



          <div class="gdoc-page__footer flex flex-wrap justify-between">
            








  
  

  







          </div>
        </div>
      </main>

      <footer class="gdoc-footer">
  <nav class="container flex">
    <div>
      <section class="flex flex-wrap align-center">
        <span class="gdoc-footer__item gdoc-footer__item--row">
          Built with <a href="https://gohugo.io/" class="gdoc-footer__link">Hugo</a> and <svg class="gdoc-icon gdoc_heart"><use xlink:href="#gdoc_heart"></use></svg>

        </span>
        
          <span class="gdoc-footer__item gdoc-footer__item--row">
            <a href="https://www.linuxfoundation.org/legal/trademark-usage" class="gdoc-footer__link">
              Trademarks
            </a>
          </span>
        
        
      </section>
      
        <section class="flex flex-wrap align-center">
          <span class="gdoc-footer__item">
            Content licensed under

            <a href="https://creativecommons.org/licenses/by/4.0/" class="gdoc-footer__link no-wrap">CC BY 4.0</a>
          </span>
        </section>
      
    </div>
    
      <div class="flex flex-25 justify-end">
        <span class="gdoc-footer__item text-right">
          <a class="gdoc-footer__link fake-link" href="index.html#" aria-label="Back to top">
            <svg class="gdoc-icon gdoc_keyboard_arrow_up">
              <use xlink:href="#gdoc_keyboard_arrow_up"></use>
            </svg>
            <span class="hidden-mobile">Back to top</span>
          </a>
        </span>
      </div>
    
  </nav>
</footer>

    </div>

    
  <script defer src="../../js/search-9719be99.bundle.min.js"></script>

  </body>
</html>
