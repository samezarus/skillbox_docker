exec-форма - команды выполняются вне оболочки (/bin/sh)

shell-форма - команды выполняются внутри оболочку (/bin/sh)


FROM <имя образа>
    
   Базовый образ, на основе которого будет создан контейнер

RUN <комманда>/RUN ["", ...]
    
   Выполнение различных команд.

   !!! Важно, каждый вызов создаёт новый слой.
    
   1. exec-форма:

      RUN ["<команда>", "аргумент1", ...]

   2. shell-форма:

      RUN <команда> "аргумент1" ...

COPY <источник> <назначение в образе> (предпочтительно !)

   Копирование чего либо с хоста в образ.

   Источников может быть несколько:
      COPY host_folder1, host_folder2, img_folder/ (в случае каталогов "/" обязателен)

ADD

   Копирование чего либо с хоста в образ.
   Можно передавать и архтвы, которые будут автоматически распакованы в месте назначения.

ENTRYPOINT ["<скрит/программа>"]/ENTRYPOINT <скрит/программа> <параметр1> <параметр2> ...

   Что запустить, когда на основе образа будет создан контейнер

   !!! Важно, если скрипт, то его надо обязательно сделать исполняемым (chmod +x <имя скрипта>)

   1. Связка с CMD (предпочтительно !) (ожидание аргумента/аргументов из CMD)

      ENTRYPOINT ["<скрит/программа/команда>"]
   
   2. exec-форма:

      ENTRYPOINT ["<скрит/программа/команда>", "аргумент1", ...]

   3. shell-форма:

      ENTRYPOINT <скрит/программа/команда> "аргумент1" ...

   
CMD 

   Что запустить, когда на основе образа будет создан контейнер

   !!! Инструкция может быть только одна, иначе выполнится самая последняя

   1. Связка с ENTRYPOINT (предпочтительно !)
   
      CMD ["<аргумент1>, ..."]
   
   2. exec-форма:

      CMD ["<скрит/программа/команда>", "аргумент1", ...]

   3. shell-форма:

      CMD <скрит/программа/команда> "аргумент1" ...

WORKDIR

   Задаёт рабочий каталог для инструкций RUN, COPY, ADD, ENTRYPOINT, CMD
   Т.е куда в образ будет что-то копироваться, или откуда что-то будет выполняться

USER

   Задаёт имя пользователя от которого будут выполняться команды (RUN) и запуск
   ENTRYPOINT/CMD после сборки

   !!! запуск ENTRYPOINT/CMD не должен быть от рута

LABEL

   Набор мета-данных для описания различных спеков образа

EXPOSE <порт> или <порт>/<протокол>

   На каком порту слушает процесс при запуске

ENV

   Определение переменных окружения (работает при сборке и работе контейнера собранного на основе этого образа)
   
ARG

   Переменные внутри Dockerfile. (работает только при сборке)
   
   Объявление: "path=/root/folder1"
   
   Использование: "$path"

   Так же этим переменным можно переопределить при сборке:

      docker build ... --buld_arg path=/var/www/html ...
